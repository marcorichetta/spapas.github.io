<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta name="google-site-verification" content="5_8DTmIiEq4gFvNAfxAD6TsGOgrMAjp8lQFQvfA6zZc" />
    <title>Using browserify and watchify to improve your client-side-javascript workflow &mdash; /var/</title>
    <meta name="author" content="Serafeim Papastefanos">






    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://spapas.github.io/favicon.png" rel="icon">

    <link href="https://spapas.github.io/theme/css/main.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://spapas.github.io/theme/css/extra_style.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Fira+Sans:400,700&amp;subset=greek" rel="stylesheet">


    <script data-ad-client="ca-pub-7673322832689008" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://spapas.github.io/">/var/</a></h1>
    <h2>Various programming stuff</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="https://spapas.github.io/category/android.html">Android</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/css.html">Css</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/django.html">Django</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/elixir.html">Elixir</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/flask.html">Flask</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/git.html">Git</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/html.html">Html</a>
      </li>
      <li class="active">
        <a href="https://spapas.github.io/category/javascript.html">Javascript</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/pelican.html">Pelican</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/postgresql.html">Postgresql</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/python.html">Python</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/spring.html">Spring</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/unix.html">Unix</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/wagtail.html">Wagtail</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Using browserify and watchify to improve your client-side-javascript workflow</h1>
    <p class="meta">
<time datetime="2015-05-27T14:20:00+03:00" pubdate>Τετ 27 Μάιος 2015</time>    </p>
</header>

<div class="entry-content"><div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#the-problem" id="id1">The&nbsp;problem</a></li>
<li><a class="reference internal" href="#the-solution" id="id2">The&nbsp;solution</a></li>
<li><a class="reference internal" href="#installing-required-tools" id="id3">Installing required&nbsp;tools</a></li>
<li><a class="reference internal" href="#starting-your-node-js-project" id="id4">Starting your (node.js)&nbsp;project</a></li>
<li><a class="reference internal" href="#running-browserify-for-the-first-time" id="id5">Running browserify for the first&nbsp;time</a></li>
<li><a class="reference internal" href="#using-external-libraries" id="id6">Using external&nbsp;libraries</a></li>
<li><a class="reference internal" href="#introducing-watchify" id="id7">Introducing&nbsp;watchify</a></li>
<li><a class="reference internal" href="#creating-your-own-modules" id="id8">Creating your own&nbsp;modules</a></li>
<li><a class="reference internal" href="#uglifying-your-bundle" id="id9">Uglifying your&nbsp;bundle</a></li>
<li><a class="reference internal" href="#the-client-side-javascript-workflow" id="id10">The client-side javascript&nbsp;workflow</a></li>
<li><a class="reference internal" href="#conlusion" id="id11">Conlusion</a></li>
</ul>
</div>
<div class="section" id="the-problem">
<h2><a class="toc-backref" href="#id1">The&nbsp;problem</a></h2>
<p>Once upon a time, when people started using client-side code to their projects they (mainly
due to the lack of decent client-side libraries but also because of the <a class="reference external" href="http://en.wikipedia.org/wiki/Not_invented_here"><span class="caps">NIH</span> syndrome</a>)
were just adding their own code in script nodes or .js files using <tt class="docutils literal">document.getElementById</tt> to manipulate
the <span class="caps">DOM</span> (good luck checking for all possible browser-edge cases)
and <tt class="docutils literal">window.XMLHttpRequest</tt> to try doing <span class="caps">AJAX</span>.</p>
<p>After these dark-times, the
age of javascript-framework came: prototype, jquery, dojo. These were (and still are)
some great libraries (even <span class="caps">NIH</span>-sick people used them to handle browser incompatibilities):
You just downloaded the .js file with the framework, put it inside your project
static files and added it to your page with a script tag and then filled your client-side
code with funny $(&#8216;#id&#8217;)&nbsp;symbols!</p>
<p>Coming to the modern age in client-side development, the number of decent libraries has greatly increased
and instead of monolithic frameworks there are different libraries for different needs. So instead of
just downloading a single file and adding the script node for that file to your <span class="caps">HTML</span>, you need to
download the required javascript files, put them all in your static files directory and then micro-manage
the script nodes for each of your pages depending on which libraries each page needs! So if you want
to use (for example) moment.js to your client-side code you need to go to <em>all</em> <span class="caps">HTML</span> pages that use that
specific client-side code and add a moment.js-script&nbsp;element!</p>
<p>As can be understood this leads to really ugly situations like people avoiding refactoring their code to use
external libraries, using a single-global module  with all their client side code, using <span class="caps">CDN</span> to avoid
downloading the javascript libraries and of course never upgrade their javascript&nbsp;libraries!</p>
</div>
<div class="section" id="the-solution">
<h2><a class="toc-backref" href="#id2">The&nbsp;solution</a></h2>
<p><a class="reference external" href="http://browserify.org/">browserify</a> and <a class="reference external" href="https://github.com/substack/watchify">watchify</a> are two sister tools from the server-side-javascript (node.js and friends)
world that greatly improve your javascript workflow: Using them, you no longer need to micro-manage
your script tags but instead you just declare the libraries each of your client-side modules is
using - or you can even create your own reusable modules! Also, installing (or updating) javascript
libraries is as easy as running a single&nbsp;command!</p>
<p>How are they working? With browserify you create a single <tt class="docutils literal">main.js</tt> for each of your <span class="caps">HTML</span>
pages and in it you declare its requirements using <a class="reference external" href="https://github.com/substack/browserify-handbook#require">require</a>. You&#8217;ll then pass your <tt class="docutils literal">main.js</tt>
through browserify and it will create a single file (e.g <tt class="docutils literal">bundle.js</tt>) that contains all the requirements
(of course each requirement could have other requirements - they&#8217;ll be automatically also
included in the resulting .js file). That&#8217;s the <em>only</em> file you need to put to the script tag of
your <span class="caps">HTML</span>! Using watchify, you can <em>watch</em> your <tt class="docutils literal">main.js</tt> for changes (the changes may also
be in the files included from main.js) and automatically generate the resulting <tt class="docutils literal">bundle.js</tt> so that
you&#8217;ll just need to hit F5 to refresh and get the new&nbsp;version!</p>
<p>browserify not only concatenates your javascript libraries to a single bundle but can also transform
your coffesscript, typescript, jsx etc files to javascrpt and <em>then</em> also add them to the bundle. This
is possible through a concept called transforms &#8212; there are <a class="reference external" href="https://github.com/substack/node-browserify/wiki/list-of-transforms">a lot of transforms</a> that you can&nbsp;use.</p>
<p>Below, I will propose a really simple and generic workflow that should cover most of your javascript needs.
I should mention that I mainly develop django apps and my development machine is running windows, however you
can easily use exactly the  same workflow from any kind of server-side technology (ruby, python, javascript,
java, php or even static <span class="caps">HTML</span> pages!) or development machine (windows, linux, osx) - it&#8217;s exactly the&nbsp;same!</p>
</div>
<div class="section" id="installing-required-tools">
<h2><a class="toc-backref" href="#id3">Installing required&nbsp;tools</a></h2>
<p>As already mentioned, you need two node.js tools. Just install them globally using npm (installing
node.js and npm is really easy - there&#8217;s even <a class="reference external" href="https://nodejs.org/download/">a package for windows</a>):</p>
<pre class="code literal-block">
npm install -g browserify watchify
</pre>
<p>The <tt class="docutils literal"><span class="pre">-g</span></tt> switch installs the packages globally so you can use the browserify and watchify commands from
your command prompt - after that entering <tt class="docutils literal">browserify</tt> or <tt class="docutils literal">watchify</tt> from your command prompt should be&nbsp;working.</p>
</div>
<div class="section" id="starting-your-node-js-project">
<h2><a class="toc-backref" href="#id4">Starting your (node.js)&nbsp;project</a></h2>
<p>Although you may already have a project structure, in order to use browserify you&#8217;ll need to
create a node.js project (project from now on) that needs just two&nbsp;things:</p>
<ul class="simple">
<li>a <tt class="docutils literal">package.json</tt> that lists various options for your&nbsp;project</li>
<li>a <tt class="docutils literal">node_modules</tt> directory that contains the packages that your project&nbsp;uses</li>
</ul>
<p>To create the <tt class="docutils literal">package.json</tt> you can either copy paste a simple one or run <tt class="docutils literal">npm init</tt> inside
a folder of your project. After <tt class="docutils literal">npm init</tt> you&#8217;ll need to answer a bunch of questions and then
a <tt class="docutils literal">package.json</tt> will be created to the same folder. If you don&#8217;t want to answer these questions
(most probably you only want to use node.js for browserify - instead you wouldn&#8217;t be reading
this) then just put an empty json string <tt class="docutils literal">{}</tt> in <tt class="docutils literal">package.json</tt>.</p>
<p>I recommend adding <tt class="docutils literal">package.json</tt> to the top-level folder of your version-controlled souce-code tree -
please put this file in your version control - the <tt class="docutils literal">node_modules</tt> directory will be be created
to the same directory with <tt class="docutils literal">package.json</tt> and should be ignored by your version&nbsp;control.</p>
</div>
<div class="section" id="running-browserify-for-the-first-time">
<h2><a class="toc-backref" href="#id5">Running browserify for the first&nbsp;time</a></h2>
<p>Not the time has come to create a <tt class="docutils literal">main.js</tt> file. This could be put anywhere you like (based on your project structure) -
I&#8221; suppose that <tt class="docutils literal">main.js</tt> is inside the <tt class="docutils literal">src/</tt>  folder of your project.
Just put a <tt class="docutils literal"><span class="pre">console.log(&quot;Hello,</span> world&quot;)</tt> to the <tt class="docutils literal">main.js</tt> for now. To test that everything is working,&nbsp;run:</p>
<pre class="code literal-block">
browserify src/main.js
</pre>
<p>You should see some minified-js gibberish to your console (something like <tt class="docutils literal">(function <span class="pre">e(t,n,r){function</span> <span class="pre">s(o,u){if(!n[o]){if(!t[o]){var</span> a=typeof <span class="pre">...)</span></tt>
) which means that everything works fine. Now, create a <tt class="docutils literal">dist</tt> directory which would contain your bundle files and&nbsp;run</p>
<pre class="code literal-block">
browserify src/main.js -o dist/bundle.js
</pre>
<p>the -o switch will put the the same minified-js gibberish output to the  <tt class="docutils literal">dist/bundle.js</tt> file instead of stdout.
Finally, include a script element with that file to your <span class="caps">HTML</span> and you
should see &#8220;Hello, world&#8221; to your javascript console when opening the <span class="caps">HTML</span>&nbsp;file!</p>
</div>
<div class="section" id="using-external-libraries">
<h2><a class="toc-backref" href="#id6">Using external&nbsp;libraries</a></h2>
<p>To use a library from your main.js you need to install it and get a reference to it through require. Let&#8217;s try to use <a class="reference external" href="http://momentjs.com/">moment.js</a>:
To install the library&nbsp;run</p>
<pre class="code literal-block">
npm install moment --save
</pre>
<p>This will create a moment directory inside node_modules that will contain the moment.js library. It will also add a
dependency to your <tt class="docutils literal">package.json</tt> (that&#8217;s what the <tt class="docutils literal"><span class="pre">--save</span></tt> switch does), something like&nbsp;this:</p>
<pre class="code literal-block">
&quot;dependencies&quot;: {
  &quot;moment&quot;: &quot;^2.10.3&quot;
}
</pre>
<p>Whenever you install more client-side libraries they&#8217;ll be saved there. When you want to re-install everything (for instance
when you clone your project) you can just do&nbsp;a</p>
<pre class="code literal-block">
npm install
</pre>
<p>and all dependencies of <tt class="docutils literal">package.json</tt> will be installed in <tt class="docutils literal">node_modules</tt> (that&#8217;s why <tt class="docutils literal">node_modules</tt> should not be&nbsp;tracked).</p>
<p>After you&#8217;ve installed moment.js to your project change <tt class="docutils literal">src/main.js</tt> to:</p>
<pre class="code literal-block">
moment = require('moment')
console.log(moment() );
</pre>
<p>and rerun <tt class="docutils literal">browserify src/main.js <span class="pre">-o</span> dist/bundle.js</tt>. When you reload your <span class="caps">HTML</span> you&#8217;ll see the that you are able to use
moment - all this without changing your <span class="caps">HTML</span>!!!</p>
<p>As you can understand, in order to use a library with browserify, this library must support it by having an npm package. The nice thing is that
most libraries already support it &#8212; let&#8217;s try for another example to use <a class="reference external" href="http://underscorejs.org/">underscore.js</a> and (for some reason) we need version underscore 1.7&nbsp;:</p>
<pre class="code literal-block">
npm install underscore&#64;1.7--save
</pre>
<p>you&#8217;ll se that your package.json dependencies will also contain underscore.js&nbsp;1.7:</p>
<pre class="code literal-block">
{
  &quot;dependencies&quot;: {
    &quot;moment&quot;: &quot;^2.10.3&quot;,
    &quot;underscore&quot;: &quot;^1.7.0&quot;
  }
}
</pre>
<p>If you want to upgrade underscore to the latest version run&nbsp;a:</p>
<pre class="code literal-block">
npm install underscore --upgrade --save
</pre>
<p>and you&#8217;ll see that your <tt class="docutils literal">package.json</tt> will contan the latest version of&nbsp;underscore.js.</p>
<p>Finally, let&#8217;s change our <tt class="docutils literal">src/man.js</tt> to use&nbsp;underscore:</p>
<pre class="code literal-block">
moment = require('moment')
_ = require('underscore')

_([1,2,3]).map(function(x) {
  console.log(x+1);
});
</pre>
<p>After you create your bundle you should se 2 3 4 in your&nbsp;console!</p>
</div>
<div class="section" id="introducing-watchify">
<h2><a class="toc-backref" href="#id7">Introducing&nbsp;watchify</a></h2>
<p>Running browserify <em>every</em> time you change your js files to create the <tt class="docutils literal">bundle.js</tt> feels
like doing repetitive work - this is where wachify comes to the rescue; watchify is a
tool that watches your source code and dependencies and when a change is detected it will
recreate the bundle&nbsp;automagically!</p>
<p>To run it, you can&nbsp;use:</p>
<pre class="code literal-block">
watchify src/main.js -o dist/bundle.js -v
</pre>
<p>and you&#8217;ll see something like: <tt class="docutils literal">155544 bytes written to dist/bundle.js (0.57 seconds)</tt> &#8212; try
changing main.js and you&#8217;ll see that bundle.js will also be&nbsp;re-written!</p>
<p>Some things to keep in mind with watchify&nbsp;usage:</p>
<ul class="simple">
<li>The -v flag outputs the verbose text (or else you won&#8217;t se any postive messages) - I like using it to be sure that everything is&nbsp;ok.</li>
<li>You need to use the -o flag with watchify &#8212; you can&#8217;t output to stdout(we&#8217;ll see that this will change our workflow for production a bit&nbsp;later)</li>
<li>watchify takes the same parameters with browserify &#8212; so if you do any transformations with browserify you can also do them with&nbsp;watchify</li>
</ul>
<p>In the following, I&#8217;ll assume that you are running the <tt class="docutils literal">watchify src/main.js <span class="pre">-o</span> dist/bundle.js <span class="pre">-d</span></tt> so your bundles will
always be re-created when changes are&nbsp;found.</p>
</div>
<div class="section" id="creating-your-own-modules">
<h2><a class="toc-backref" href="#id8">Creating your own&nbsp;modules</a></h2>
<p>Using browserify we can create our own modules and <em>require</em> them in other modules using the <tt class="docutils literal">module.exports</tt> mechanism!</p>
<p>Creating a module is really simple: In a normal javascript file either assign directly to module.exports or
include all local objects you want to be visible as an attribute to <tt class="docutils literal">module.exports</tt> &#8212; everything
else will be private to the&nbsp;module.</p>
<p>As an example, let&#8217;s create an <tt class="docutils literal">src/modules</tt> folder and put a file module1.js inside it, containing the&nbsp;following:</p>
<pre class="code literal-block">
var variable = 'variable'
var variable2 = 'variable2'
var funct = function(x) {
  return x+1;
}
var funct2 = function(x) {
  return x+1;
}

module.exports['variable'] = variable
module.exports['funct'] = funct
</pre>
<p>As you see, although we&#8217;ve defined a number of things in that module, only the variable and funct attributes
of module.exports will be visible when the module is used. To use the module, change main.js like&nbsp;this:</p>
<pre class="code literal-block">
module1 = require('./modules/module1')
console.log(module1.funct(9))
</pre>
<p>When you refresh your <span class="caps">HTML</span> you&#8217;ll see 10 in the console. So, require will return the <tt class="docutils literal">module.exports</tt> objects
of each module. It will either search in your project&#8217;s <tt class="docutils literal">node_modules</tt> (when you use just the modfule name,
for example <tt class="docutils literal">moment</tt>, or locally (when you start a path with either <tt class="docutils literal">./</tt> or <tt class="docutils literal">../</tt> &#8212; in our case we required
the module <tt class="docutils literal">module1.js</tt> from the folder <tt class="docutils literal">modules</tt>).</p>
<p>As a final example, we&#8217;ll create another module that is used by module1: Create a file named <tt class="docutils literal">module2.js</tt> inside the
<tt class="docutils literal">modules</tt> folder and the following&nbsp;contents:</p>
<pre class="code literal-block">
var funct = function(x) {
    return x+1;
}

module.exports = funct
</pre>
<p>After that, change <tt class="docutils literal">module1.js</tt> to&nbsp;this:</p>
<pre class="code literal-block">
module2 = require('./module2')

var variable = 'variable'
var funct = function(x) {
    return module2(x)+1;
}

module.exports['variable'] = variable
module.exports['funct'] = funct
</pre>
<p>So <tt class="docutils literal">module1</tt> will import the <tt class="docutils literal">module2</tt> module (from the same directory) and call it (since a function is assignedd to module.exports).
When you refresh your <span class="caps">HTML</span> you should see&nbsp;11!</p>
</div>
<div class="section" id="uglifying-your-bundle">
<h2><a class="toc-backref" href="#id9">Uglifying your&nbsp;bundle</a></h2>
<p>If had taken a look at the file size of your <tt class="docutils literal">bundle.js</tt> when you&#8217;d included moment.js or underscore.js you&#8217;d see
that the file size has been greatly increased. Take a peek at <tt class="docutils literal">bundle.js</tt> and you&#8217;ll see why: The contents of the module files
will be concatenated as they are, without any changes! This may be nice for development / debugging, however for production
we&#8217;d like our bundle.js to be minified &#8212; or uglyfied as it&#8217;s being said in the javascript&nbsp;world.</p>
<p>To help us with this, uglifying we&#8217;ll use <a class="reference external" href="https://www.npmjs.com/package/uglify-js">uglify-js</a>. First of all, please install it&nbsp;globally</p>
<pre class="code literal-block">
npm install uglify-js -g
</pre>
<p>and you&#8217;ll be able to use the <tt class="docutils literal">uglifyjs</tt> command to uglify your bundles! To use the <tt class="docutils literal">uglifyjs</tt> command for your <tt class="docutils literal">bundle.js</tt>
try&nbsp;this</p>
<pre class="code literal-block">
uglifyjs dist\bundle.js  &gt; dist\bundle.min.js
</pre>
<p>and you&#8217;ll see the size of the bundle.min.js greatly reduced! To achieve even better minification (and code mangling as an added
bonus) you could pass the -mc options to&nbsp;uglify:</p>
<pre class="code literal-block">
uglifyjs dist\bundle.js -mc &gt; dist\bundle.min.js
</pre>
<p>and you&#8217;ll see an even smaller&nbsp;bundle.min.js!</p>
<p>As a final step, we can combine the output of browserify and uglify to a single command using a&nbsp;pipe:</p>
<pre class="code literal-block">
browserify src/main.js | uglifyjs -mc &gt; dist/bundle.js
</pre>
<p>this will create the uglified bundle.js! Using the pipe to output to uglifyjs is not possible
with watchify since watchify cannot output to stdout &#8212; however, as we&#8217;ll see in the next section
this is not a real&nbsp;problem.</p>
</div>
<div class="section" id="the-client-side-javascript-workflow">
<h2><a class="toc-backref" href="#id10">The client-side javascript&nbsp;workflow</a></h2>
<p>The proposed client-side javascript workflow uses two commands, one for the development and one
for creating the production&nbsp;bundle.</p>
<p>For the development, we&#8217;ll use watchify since we need to immediately re-create the bundle when a
javascript source file is changed and we don&#8217;t want any&nbsp;uglification:</p>
<pre class="code literal-block">
watchify src/main.js -o dist/bundle.js -v
</pre>
<p>For creating our production bundle, we&#8217;ll use browserify and&nbsp;uglify:</p>
<pre class="code literal-block">
browserify src/main.js  | uglifyjs -mc warnings=false &gt; dist/bundle.js
</pre>
<p>(i&#8217;ve added warnings=false to uglfiyjs to suppress&nbsp;warnings).</p>
<p>The above two commands can either be put to batch files or added to your existing workflow (for example
as <a class="reference external" href="http://www.fabfile.org/">fabric</a> commands if you use fabric). However, since we already have a javascrpt project (i.e a <tt class="docutils literal">package.json</tt>)
we can use that to run these commands. Just add a <tt class="docutils literal">scripts</tt> section to your package.json like&nbsp;this:</p>
<pre class="code literal-block">
{
  &quot;dependencies&quot;: {
    &quot;moment&quot;: &quot;^2.10.3&quot;,
    &quot;underscore&quot;: &quot;^1.8.3&quot;
  },
  &quot;scripts&quot;: {
    &quot;watch&quot;: &quot;watchify src/main.js -o dist/bundle.js -v&quot;,
    &quot;build&quot;: &quot;browserify src/main.js  | uglifyjs -mc warnings=false &gt; dist/bundle.js&quot;
  }
}
</pre>
<p>and you&#8217;ll be able to run <tt class="docutils literal">npm run watch</tt> to start watchifying for changes and <tt class="docutils literal">npm run build</tt> to
create your production&nbsp;bundle!</p>
</div>
<div class="section" id="conlusion">
<h2><a class="toc-backref" href="#id11">Conlusion</a></h2>
<p>In the above we saw two (three if we include uglifyjs) javascript tools that will greatly improve our
javascript workflow. Using these we can easily <em>require</em> (import) external javascript libraries to
our project without any micromanagement of script tags in html files. We also can seperate our own
client-side code to self-contained modules that will only export interfaces and not pollute the global
namespace. The resulting production client-side javascript file will be output minimized and ready to
be used by the users&#8217;&nbsp;browsers.</p>
<p>All the above are possible with minimal changes to our code and development&nbsp;workflow:</p>
<ul class="simple">
<li>create a package.json and install your&nbsp;dependencies</li>
<li>require the external libraries (instead of using them off the global&nbsp;namespace)</li>
<li>define your module&#8217;s interace through module.exports (instead of polluting the global&nbsp;namespace)</li>
<li>change your client javascript files to <tt class="docutils literal">bundle.js</tt></li>
<li>run <tt class="docutils literal">npm run watch</tt> when developing and <tt class="docutils literal">npm run build</tt> before&nbsp;deploying</li>
</ul>
</div>
</div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Serafeim Papastefanos
    </span>
  </span>
<time datetime="2015-05-27T14:20:00+03:00" pubdate>Τετ 27 Μάιος 2015</time>  <span class="categories">
    <a class='category' href='https://spapas.github.io/category/javascript.html'>javascript</a>
  </span>
  <span class="categories">
    <a class="category" href="https://spapas.github.io/tag/javascript.html">javascript</a>,    <a class="category" href="https://spapas.github.io/tag/browserify.html">browserify</a>,    <a class="category" href="https://spapas.github.io/tag/node.html">node</a>,    <a class="category" href="https://spapas.github.io/tag/npm.html">npm</a>,    <a class="category" href="https://spapas.github.io/tag/watchify.html">watchify</a>,    <a class="category" href="https://spapas.github.io/tag/generic.html">generic</a>,    <a class="category" href="https://spapas.github.io/tag/uglify.html">uglify</a>  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="https://spapas.github.io/2015/05/27/using-browserify-watchify/" data-via="" data-counturl="https://spapas.github.io/2015/05/27/using-browserify-watchify/" >Tweet</a>
</div>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <br />
    <a href='/feeds/all.atom.xml'>Atom</a>
    |
    <a href='/feeds/all.rss.xml'>RSS</a>
  </section>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Sidebar unit -->
  <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7673322832689008" data-ad-slot="2720624730"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  <section>
    <h1>Subscribe</h1>
    Do you want to get notified via email when I post new content?
    <style>
      .subscribe-button {
        /* margin: 10px !important; */
        padding: 10px !important;
        background-color: black;
        display: inline-block;
        color: white !important;
        text-decoration: none;

        line-height: 36px !important;
        height: 37px !important;
        text-decoration: none !important;
        display: inline-block !important;
        color: #ffffff !important;
        background-color: #000000 !important;
        border-radius: 3px !important;
        border: 1px solid transparent !important;
        padding: 1px 9px !important;
        font-size: 23px !important;
        letter-spacing: 0.6px !important;
        box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
        -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
        margin: 0 auto !important;
        font-family: 'Cookie', cursive !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
        -o-transition: 0.3s all linear !important;
        -webkit-transition: 0.3s all linear !important;
        -moz-transition: 0.3s all linear !important;
        -ms-transition: 0.3s all linear !important;
        transition: 0.3s all linear !important;

      }
    </style>
    <a class='subscribe-button' target="_blank" href="http://eepurl.com/dxI3PP">Click here to subscribe!</a>
  </section>

  <style>
    .bmc-button img {
      width: 27px !important;
      margin-bottom: 3px !important;
      box-shadow: none !important;
      border: none !important;
      vertical-align: middle !important;
    }

    .bmc-button {
      line-height: 36px !important;
      height: 37px !important;
      text-decoration: none !important;
      display: inline-block !important;
      color: #ffffff !important;
      background-color: #000000 !important;
      border-radius: 3px !important;
      border: 1px solid transparent !important;
      padding: 1px 9px !important;
      font-size: 23px !important;
      letter-spacing: 0.6px !important;
      ;
      box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
      -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
      margin: 0 auto !important;
      font-family: 'Cookie', cursive !important;
      -webkit-box-sizing: border-box !important;
      box-sizing: border-box !important;
      -o-transition: 0.3s all linear !important;
      -webkit-transition: 0.3s all linear !important;
      -moz-transition: 0.3s all linear !important;
      -ms-transition: 0.3s all linear !important;
      transition: 0.3s all linear !important;
    }

    .bmc-button:hover,
    .bmc-button:active,
    .bmc-button:focus {
      -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
      text-decoration: none !important;
      box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
      opacity: 0.85 !important;
      color: #ffffff !important;
    }
  </style>
  <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet">


  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
        <a href="https://spapas.github.io/2019/10/17/declarative-ecto-query-sorting/">Declarative Ecto query sorting</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/10/03/html-form-submit-php/">How to properly handle an HTML form</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/07/25/declarative-ecto-query-filters/">Declarative Ecto query filters</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/06/04/phoenix-form-select2-ajax/">Phoenix forms integration with select2 and ajax</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/04/05/android-custom-filter-adapter/">How to create a custom filtered adapter in Android</a>
      </li>
    </ul>
  </section>
  <section>

    <h1>Categories</h1>
    <ul id="recent_posts">
      <li><a href="https://spapas.github.io/category/android.html">android</a></li>
      <li><a href="https://spapas.github.io/category/css.html">css</a></li>
      <li><a href="https://spapas.github.io/category/django.html">django</a></li>
      <li><a href="https://spapas.github.io/category/elixir.html">elixir</a></li>
      <li><a href="https://spapas.github.io/category/flask.html">flask</a></li>
      <li><a href="https://spapas.github.io/category/git.html">git</a></li>
      <li><a href="https://spapas.github.io/category/html.html">html</a></li>
      <li><a href="https://spapas.github.io/category/javascript.html">javascript</a></li>
      <li><a href="https://spapas.github.io/category/pelican.html">pelican</a></li>
      <li><a href="https://spapas.github.io/category/postgresql.html">postgresql</a></li>
      <li><a href="https://spapas.github.io/category/python.html">python</a></li>
      <li><a href="https://spapas.github.io/category/spring.html">spring</a></li>
      <li><a href="https://spapas.github.io/category/unix.html">unix</a></li>
      <li><a href="https://spapas.github.io/category/wagtail.html">wagtail</a></li>
    </ul>
  </section>

  <section>
    <h1>Tags</h1>
    <a href="https://spapas.github.io/tag/less.html">less</a>,    <a href="https://spapas.github.io/tag/rest.html">rest</a>,    <a href="https://spapas.github.io/tag/query.html">query</a>,    <a href="https://spapas.github.io/tag/ecto.html">ecto</a>,    <a href="https://spapas.github.io/tag/tables.html">tables</a>,    <a href="https://spapas.github.io/tag/pivot_table.html">pivot_table</a>,    <a href="https://spapas.github.io/tag/console.html">console</a>,    <a href="https://spapas.github.io/tag/async.html">async</a>,    <a href="https://spapas.github.io/tag/django-rq.html">django-rq</a>,    <a href="https://spapas.github.io/tag/github-pages.html">github-pages</a>,    <a href="https://spapas.github.io/tag/forms.html">forms</a>,    <a href="https://spapas.github.io/tag/yaml.html">yaml</a>,    <a href="https://spapas.github.io/tag/404.html">404</a>,    <a href="https://spapas.github.io/tag/ldap.html">ldap</a>,    <a href="https://spapas.github.io/tag/immutable.html">immutable</a>,    <a href="https://spapas.github.io/tag/initd.html">init.d</a>,    <a href="https://spapas.github.io/tag/youtube-dl.html">youtube-dl</a>,    <a href="https://spapas.github.io/tag/python.html">python</a>,    <a href="https://spapas.github.io/tag/django-extensions.html">django-extensions</a>,    <a href="https://spapas.github.io/tag/class-based-views.html">class-based-views</a>,    <a href="https://spapas.github.io/tag/scipy.html">scipy</a>,    <a href="https://spapas.github.io/tag/grid.html">grid</a>,    <a href="https://spapas.github.io/tag/ag-grid.html">ag-grid</a>,    <a href="https://spapas.github.io/tag/du.html">du</a>,    <a href="https://spapas.github.io/tag/watchify.html">watchify</a>,    <a href="https://spapas.github.io/tag/settings.html">settings</a>,    <a href="https://spapas.github.io/tag/flux.html">flux</a>,    <a href="https://spapas.github.io/tag/fixeddatatable.html">FixedDataTable</a>,    <a href="https://spapas.github.io/tag/queries.html">queries</a>,    <a href="https://spapas.github.io/tag/debug.html">debug</a>,    <a href="https://spapas.github.io/tag/imgur.html">imgur</a>,    <a href="https://spapas.github.io/tag/security.html">security</a>,    <a href="https://spapas.github.io/tag/npm.html">npm</a>,    <a href="https://spapas.github.io/tag/hyperapp.html">hyperapp</a>,    <a href="https://spapas.github.io/tag/spring.html">spring</a>,    <a href="https://spapas.github.io/tag/react-redux.html">react-redux</a>,    <a href="https://spapas.github.io/tag/cron.html">cron</a>,    <a href="https://spapas.github.io/tag/babelify.html">babelify</a>,    <a href="https://spapas.github.io/tag/design.html">design</a>,    <a href="https://spapas.github.io/tag/tutorial.html">tutorial</a>,    <a href="https://spapas.github.io/tag/gmail.html">gmail</a>,    <a href="https://spapas.github.io/tag/reportlab.html">reportlab</a>,    <a href="https://spapas.github.io/tag/rq.html">rq</a>,    <a href="https://spapas.github.io/tag/redis.html">redis</a>,    <a href="https://spapas.github.io/tag/python-3.html">python-3</a>,    <a href="https://spapas.github.io/tag/research.html">research</a>,    <a href="https://spapas.github.io/tag/werkzeug.html">werkzeug</a>,    <a href="https://spapas.github.io/tag/jobs.html">jobs</a>,    <a href="https://spapas.github.io/tag/redux-thunk.html">redux-thunk</a>,    <a href="https://spapas.github.io/tag/disk-usage.html">disk-usage</a>,    <a href="https://spapas.github.io/tag/javascript.html">javascript</a>,    <a href="https://spapas.github.io/tag/component.html">component</a>,    <a href="https://spapas.github.io/tag/ajax.html">ajax</a>,    <a href="https://spapas.github.io/tag/elixir.html">elixir</a>,    <a href="https://spapas.github.io/tag/ipython.html">ipython</a>,    <a href="https://spapas.github.io/tag/uglify.html">uglify</a>,    <a href="https://spapas.github.io/tag/configuration.html">configuration</a>,    <a href="https://spapas.github.io/tag/properties.html">properties</a>,    <a href="https://spapas.github.io/tag/bash.html">bash</a>,    <a href="https://spapas.github.io/tag/es6.html">es6</a>,    <a href="https://spapas.github.io/tag/spring-boot.html">spring-boot</a>,    <a href="https://spapas.github.io/tag/postgresql.html">postgresql</a>,    <a href="https://spapas.github.io/tag/kotlin.html">kotlin</a>,    <a href="https://spapas.github.io/tag/adapter.html">adapter</a>,    <a href="https://spapas.github.io/tag/filter.html">filter</a>,    <a href="https://spapas.github.io/tag/flask.html">flask</a>,    <a href="https://spapas.github.io/tag/notebook.html">notebook</a>,    <a href="https://spapas.github.io/tag/static-html.html">static-html</a>,    <a href="https://spapas.github.io/tag/pdf.html">pdf</a>,    <a href="https://spapas.github.io/tag/react-notification.html">react-notification</a>,    <a href="https://spapas.github.io/tag/pelican.html">pelican</a>,    <a href="https://spapas.github.io/tag/tasks.html">tasks</a>,    <a href="https://spapas.github.io/tag/nodejs.html">node.js</a>,    <a href="https://spapas.github.io/tag/unix.html">unix</a>,    <a href="https://spapas.github.io/tag/google.html">google</a>,    <a href="https://spapas.github.io/tag/linux.html">linux</a>,    <a href="https://spapas.github.io/tag/pivot.html">pivot</a>,    <a href="https://spapas.github.io/tag/auditing.html">auditing</a>,    <a href="https://spapas.github.io/tag/git.html">git</a>,    <a href="https://spapas.github.io/tag/java.html">java</a>,    <a href="https://spapas.github.io/tag/introduction.html">introduction</a>,    <a href="https://spapas.github.io/tag/pusher.html">pusher</a>,    <a href="https://spapas.github.io/tag/fixed-data-tables.html">fixed-data-tables</a>,    <a href="https://spapas.github.io/tag/heroku.html">heroku</a>,    <a href="https://spapas.github.io/tag/xhtml2pdf.html">xhtml2pdf</a>,    <a href="https://spapas.github.io/tag/numpy.html">numpy</a>,    <a href="https://spapas.github.io/tag/form.html">form</a>,    <a href="https://spapas.github.io/tag/django-rest-auth.html">django-rest-auth</a>,    <a href="https://spapas.github.io/tag/wagtail.html">wagtail</a>,    <a href="https://spapas.github.io/tag/rst.html">rst</a>,    <a href="https://spapas.github.io/tag/python-2.html">python-2</a>,    <a href="https://spapas.github.io/tag/ffmpeg.html">ffmpeg</a>,    <a href="https://spapas.github.io/tag/middleware.html">middleware</a>,    <a href="https://spapas.github.io/tag/profiles.html">profiles</a>,    <a href="https://spapas.github.io/tag/spring-security.html">spring-security</a>,    <a href="https://spapas.github.io/tag/githubio.html">github.io</a>,    <a href="https://spapas.github.io/tag/error.html">error</a>,    <a href="https://spapas.github.io/tag/asynchronous.html">asynchronous</a>,    <a href="https://spapas.github.io/tag/react-router-redux.html">react-router-redux</a>,    <a href="https://spapas.github.io/tag/select2.html">select2</a>,    <a href="https://spapas.github.io/tag/history.html">history</a>,    <a href="https://spapas.github.io/tag/django-rest-framework.html">django-rest-framework</a>,    <a href="https://spapas.github.io/tag/redux-form.html">redux-form</a>,    <a href="https://spapas.github.io/tag/cbv.html">cbv</a>,    <a href="https://spapas.github.io/tag/scheduling.html">scheduling</a>,    <a href="https://spapas.github.io/tag/plpgsql.html">plpgsql</a>,    <a href="https://spapas.github.io/tag/boilerplate.html">boilerplate</a>,    <a href="https://spapas.github.io/tag/generic.html">generic</a>,    <a href="https://spapas.github.io/tag/babel.html">babel</a>,    <a href="https://spapas.github.io/tag/authentication.html">authentication</a>,    <a href="https://spapas.github.io/tag/html.html">html</a>,    <a href="https://spapas.github.io/tag/android.html">android</a>,    <a href="https://spapas.github.io/tag/pandas.html">pandas</a>,    <a href="https://spapas.github.io/tag/css.html">css</a>,    <a href="https://spapas.github.io/tag/node.html">node</a>,    <a href="https://spapas.github.io/tag/phoenix.html">phoenix</a>,    <a href="https://spapas.github.io/tag/deploy.html">deploy</a>,    <a href="https://spapas.github.io/tag/mongodb.html">mongodb</a>,    <a href="https://spapas.github.io/tag/react.html">react</a>,    <a href="https://spapas.github.io/tag/autocompelte.html">autocompelte</a>,    <a href="https://spapas.github.io/tag/declarative.html">declarative</a>,    <a href="https://spapas.github.io/tag/php.html">php</a>,    <a href="https://spapas.github.io/tag/browserify.html">browserify</a>,    <a href="https://spapas.github.io/tag/branching.html">branching</a>,    <a href="https://spapas.github.io/tag/github.html">github</a>,    <a href="https://spapas.github.io/tag/jupyter.html">jupyter</a>,    <a href="https://spapas.github.io/tag/windows.html">windows</a>,    <a href="https://spapas.github.io/tag/youtube.html">youtube</a>,    <a href="https://spapas.github.io/tag/django.html">django</a>,    <a href="https://spapas.github.io/tag/q.html">q</a>,    <a href="https://spapas.github.io/tag/react-router.html">react-router</a>,    <a href="https://spapas.github.io/tag/redux.html">redux</a>,    <a href="https://spapas.github.io/tag/boostrap-material-design.html">boostrap-material-design</a>  </section>

  <section>
    <h1>Yearly archives</h1>
    <a href="https://spapas.github.io/posts/2013/">2013</a>,    <a href="https://spapas.github.io/posts/2014/">2014</a>,    <a href="https://spapas.github.io/posts/2015/">2015</a>,    <a href="https://spapas.github.io/posts/2016/">2016</a>,    <a href="https://spapas.github.io/posts/2017/">2017</a>,    <a href="https://spapas.github.io/posts/2018/">2018</a>,    <a href="https://spapas.github.io/posts/2019/">2019</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/spapas">@spapas</a> on GitHub
    <script  src="//code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script type="text/javascript">
      $(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'https://spapas.github.io/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'spapas',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="https://spapas.github.io/theme/js/github.js" type="text/javascript"> </script>
  </section>


  <section>
    <a href="https://twitter.com/_serafeim_?ref_src=twsrc%5Etfw" class="twitter-follow-button"
      data-show-count="false">Follow @_serafeim_</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2013&ndash;2019  Serafeim Papastefanos &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://spapas.github.io/theme/js/modernizr-2.0.js"></script>
  <script src="https://spapas.github.io/theme/js/ender.js"></script>
  <script src="https://spapas.github.io/theme/js/octopress.js" type="text/javascript"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44750952-1', 'auto');

    ga('send', 'pageview');
    </script>
  <script type="text/javascript">
    var disqus_shortname = 'spapas-github-io';
    var disqus_identifier = '/2015/05/27/using-browserify-watchify/';
    var disqus_url = 'https://spapas.github.io/2015/05/27/using-browserify-watchify/';
    var disqus_title = 'Using browserify and watchify to improve your client-side-javascript&nbsp;workflow';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
</body>

</html>