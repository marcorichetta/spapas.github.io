<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta name="google-site-verification" content="5_8DTmIiEq4gFvNAfxAD6TsGOgrMAjp8lQFQvfA6zZc" />
    <title>PDFs in Django: The essential guide &mdash; /var/</title>
    <meta name="author" content="Serafeim Papastefanos">






    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://spapas.github.io/favicon.png" rel="icon">

    <link href="https://spapas.github.io/theme/css/main.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://spapas.github.io/theme/css/extra_style.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Fira+Sans:400,700&amp;subset=greek" rel="stylesheet">


    <script data-ad-client="ca-pub-7673322832689008" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://spapas.github.io/">/var/</a></h1>
    <h2>Various programming stuff</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="https://spapas.github.io/category/android.html">Android</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/css.html">Css</a>
      </li>
      <li class="active">
        <a href="https://spapas.github.io/category/django.html">Django</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/elixir.html">Elixir</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/flask.html">Flask</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/git.html">Git</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/html.html">Html</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/javascript.html">Javascript</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/pelican.html">Pelican</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/postgresql.html">Postgresql</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/python.html">Python</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/spring.html">Spring</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/unix.html">Unix</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/wagtail.html">Wagtail</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">PDFs in Django: The essential guide</h1>
    <p class="meta">
<time datetime="2015-11-27T10:20:00+02:00" pubdate>Παρ 27 Νοέμβριος 2015</time>    </p>
</header>

<div class="entry-content"><div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id4">Introduction</a></li>
<li><a class="reference internal" href="#the-players" id="id5">The players</a><ul>
<li><a class="reference internal" href="#reportlab" id="id6">ReportLab</a></li>
<li><a class="reference internal" href="#xhtml2pdf" id="id7">xhtml2pdf</a></li>
<li><a class="reference internal" href="#pypdf2" id="id8">PyPDF2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#django-integration" id="id9">Django integration</a><ul>
<li><a class="reference internal" href="#using-a-plain-old-view" id="id10">Using a plain old&nbsp;view</a></li>
<li><a class="reference internal" href="#using-a-cbv" id="id11">Using a <span class="caps">CBV</span></a></li>
<li><a class="reference internal" href="#how-does-django-xhtml2pdf-loads-resources" id="id12">How does django-xhtml2pdf loads&nbsp;resources</a></li>
<li><a class="reference internal" href="#using-a-common-style-for-your-pdfs" id="id13">Using a common style for your&nbsp;PDFs</a></li>
<li><a class="reference internal" href="#changing-the-font-to-a-unicode-enabled-one" id="id14">Changing the font (to a Unicode enabled&nbsp;one)</a></li>
<li><a class="reference internal" href="#configure-django-for-debugging-pdf-creation" id="id15">Configure Django for debugging <span class="caps">PDF</span>&nbsp;creation</a></li>
<li><a class="reference internal" href="#concatenating-pdfs-in-django" id="id16">Concatenating PDFs in&nbsp;Django</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-advanced-xhtml2pdf-features" id="id17">More advanced xhtml2pdf features</a><ul>
<li><a class="reference internal" href="#laying-out" id="id18">Laying&nbsp;out</a></li>
<li><a class="reference internal" href="#extra-stuff" id="id19">Extra&nbsp;stuff</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion" id="id20">Conclusion</a></li>
</ul>
</div>
<p><strong>Upgrade 23/05/2018</strong> I&#8217;ve upgraded the sample project (<a class="reference external" href="https://github.com/spapas/django-pdf-guide">https://github.com/spapas/django-pdf-guide</a>) for usage with Django 2.0 and Python 3.x.
There were very few changes between the old, Django 1.8 compatible project and the new one. To see the differences, you can just clone it
and do a <tt class="docutils literal">git diff <span class="pre">django-1.8</span> <span class="pre">django-2.0</span></tt>: Most are related to changes between django 1.8 and django 2.0 (in the <span class="caps">URL</span> configuration use <tt class="docutils literal">path</tt> instead of <tt class="docutils literal">url</tt>,
use new style middleware etc) and between python 2.7 and 3.x (small changes in import syntax, <tt class="docutils literal">StringIO</tt> has been moved to the <tt class="docutils literal">io</tt> package). There&#8217;s also
a couple of requirement upgrades, the most important are the upgrade to <tt class="docutils literal">xhtml2pdf 0.2.2</tt> and using my own fork of <tt class="docutils literal">django_xhtml2pdf</tt> since django_xhtml2pdf
does not seem to be maintained&nbsp;anymore.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id4">Introduction</a></h2>
<p>I&#8217;ve noticed that although it is easy to create PDFs with
Python, there&#8217;s no complete guide on how to
integrate these tools with Django and resolve the problems
that you&#8217;ll encounter when trying to actually create PDFs
from your Django web&nbsp;application.</p>
<p>In this article I will present the solution I use for
creating PDFs with Django, along with various tips on how to
solve most of your common requirements. Specifically, here
are some things that we&#8217;ll&nbsp;cover:</p>
<ul class="simple">
<li>Learn how to create PDFs &#8220;by&nbsp;hand&#8221;</li>
<li>Create PDFs with Django using a normal Djang Template (similar to an <span class="caps">HTML</span>&nbsp;page)</li>
<li>Change the fonts of your&nbsp;PDFs</li>
<li>Use styling in your&nbsp;output</li>
<li>Create&nbsp;layouts</li>
<li>Embed images to your&nbsp;PDFs</li>
<li>Add page&nbsp;numbers</li>
<li>Merge (concatenate)&nbsp;PDFs</li>
</ul>
</div>
<div class="section" id="the-players">
<h2><a class="toc-backref" href="#id5">The&nbsp;players</a></h2>
<p>We are going to use the following main&nbsp;tools:</p>
<ul class="simple">
<li><a class="reference external" href="https://bitbucket.org/rptlab/reportlab">ReportLab</a> is an open source python library for creating PDFs. It uses a low-level <span class="caps">API</span> that allows &#8220;drawing&#8221; strings on specific coordinates  on the <span class="caps">PDF</span> - for people familiar with creating PDFs in Java it is more or less <a class="reference external" href="http://itextpdf.com/">iText</a> for&nbsp;python.</li>
<li><a class="reference external" href="https://github.com/chrisglass/xhtml2pdf">xhtml2pdf</a> (formerly named <em>pisa</em>) is an open source library that can convert <span class="caps">HTML</span>/<span class="caps">CSS</span> pages to <span class="caps">PDF</span> using&nbsp;ReportLab.</li>
<li><a class="reference external" href="https://github.com/chrisglass/django-xhtml2pdf">django-xhtml2pdf</a> is a wrapper around xhtml2pdf that makes integration with Django&nbsp;easier.</li>
<li><a class="reference external" href="https://github.com/mstamy2/PyPDF2">PyPDF2</a> is an open source tool of that can split, merge and transform pages of <span class="caps">PDF</span>&nbsp;files.</li>
</ul>
<p>I&#8217;ve created a <a class="reference external" href="https://github.com/spapas/django-pdf-guide">django project</a> <a class="reference external" href="https://github.com/spapas/django-pdf-guide">https://github.com/spapas/django-pdf-guide</a> with everything covered here. Please clone it,
install its requirements and play with it to see how everything works&nbsp;!</p>
<p>Before integrating the above tools to a Django project, I&#8217;d like to describe them individually a bit more. Any files
I mention below will be included in this&nbsp;project.</p>
<div class="section" id="reportlab">
<h3><a class="toc-backref" href="#id6">ReportLab</a></h3>
<p>ReportLab offers a really low <span class="caps">API</span> for creating PDFs. It is something like having a <tt class="docutils literal">canvas.drawString()</tt> method (for
people familiar with drawing APIs) for your <span class="caps">PDF</span> page. Let&#8217;s take a look at an example, creating a <span class="caps">PDF</span> with a simple&nbsp;string:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">reportlab.pdfgen</span> <span class="kn">import</span> <span class="n">canvas</span>
<span class="kn">import</span> <span class="nn">reportlab.rl_config</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">reportlab</span><span class="o">.</span><span class="n">rl_config</span><span class="o">.</span><span class="n">warnOnMissingFontGlyphs</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s2">&quot;./hello1.pdf&quot;</span><span class="p">,)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>Save the above in a file named testreportlab1.py. If you run python testreportlab1.py (in an environment that has
reportlab of cours) you should see no errors and a pdf named <tt class="docutils literal">hello1.pdf</tt> created. If you open it in your <span class="caps">PDF</span>
reader you&#8217;ll see a blank page with &#8220;Hello World&#8221; written in its lower right&nbsp;corner.</p>
<p>If you try to add a unicode text, for example &#8220;Καλημέρα ελλάδα&#8221;, you should see something like the&nbsp;following:</p>
<img alt="Hello PDF" src="/images/hellopdf2.png" style="width: 480px;" />
<p>It seems that the default font that ReportLab uses does not have a good support for accented greek characters
since they are missing  (and probably for various other&nbsp;characters).</p>
<p>To resolve this, we could try changing the font to one that contains the missing symbols. You can find free
fonts on the internet (for example the <cite>DejaVu</cite> font), or even grab one from your system fonts (in windows,
check out <tt class="docutils literal"><span class="pre">c:\windows\fonts\</span></tt>). In any case, just copy the ttf file of your font inside the folder of
your project and crate a file named testreportlab2.py with the following (I am using the DejaVuSans&nbsp;font):</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">reportlab.rl_config</span>
<span class="kn">from</span> <span class="nn">reportlab.pdfbase</span> <span class="kn">import</span> <span class="n">pdfmetrics</span>
<span class="kn">from</span> <span class="nn">reportlab.pdfbase.ttfonts</span> <span class="kn">import</span> <span class="n">TTFont</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s2">&quot;./hello2.pdf&quot;</span><span class="p">,)</span>
    <span class="n">reportlab</span><span class="o">.</span><span class="n">rl_config</span><span class="o">.</span><span class="n">warnOnMissingFontGlyphs</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">pdfmetrics</span><span class="o">.</span><span class="n">registerFont</span><span class="p">(</span><span class="n">TTFont</span><span class="p">(</span><span class="s1">&#39;DejaVuSans&#39;</span><span class="p">,</span> <span class="s1">&#39;DejaVuSans.ttf&#39;</span><span class="p">))</span>

    <span class="n">c</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="s1">&#39;DejaVuSans&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Καλημέρα ελλάδα.&quot;</span><span class="p">)</span>

    <span class="n">c</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>The above was just a scratch on the surface of ReportLab, mainly to be confident that
everything <em>will</em> work fine for non-english speaking people! To find out more, you should check the  <a class="reference external" href="http://www.reportlab.com/docs/reportlab-userguide.pdf">ReportLab open-source User Guide</a>.</p>
<p>I also have to mention that
<a class="reference external" href="http://reportlab.com/">the company behind ReportLab</a> offers some great commercial solutions based on ReportLab for creating PDFs (similar to <a class="reference external" href="http://community.jaspersoft.com/project/jasperreports-library">JasperReports</a>) - check it out
if you need support or advanced&nbsp;capabilities.</p>
</div>
<div class="section" id="xhtml2pdf">
<h3><a class="toc-backref" href="#id7">xhtml2pdf</a></h3>
<p>The xhtml2pdf is a really great library that allows you to use html files as a template
to a <span class="caps">PDF</span>. Of course, an html cannot always be converted to a <span class="caps">PDF</span> since,
unfortunately, PDFs <em>do</em> have&nbsp;pages.</p>
<p>xhtml2pdf has a nice executable script that can be used to test its capabilities. After
you install it (either globally or to a virtual environment) you should be able to find
out the executable <tt class="docutils literal">$<span class="caps">PYTHON</span>/scripts/xhtml2pdf</tt> (or <tt class="docutils literal">xhtml2pdf.exe</tt> if you are in
Windows) and a corresponding python script &#64; <tt class="docutils literal"><span class="pre">$<span class="caps">PYTHON</span>/scripts/xhtml2pdf-script.py</span></tt>.</p>
<p>Let&#8217;s try to use xhtml2pdf to explore some of its capabilities. Create a file named
testxhtml2pdf.html with the following contents and run <tt class="docutils literal">xhtml2pdf testxhtml2pdf.html</tt>:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Testing xhtml2pdf <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">i</span><span class="p">&gt;</span>Hello, italics<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Καλημέρα Ελλάδα!<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nulla erat, porttitor ut venenatis eget,
    tempor et purus. Nullam nec erat vel enim euismod auctor et at nisl. Integer posuere bibendum condimentum. Ut
    euismod velit ut porttitor condimentum. In ullamcorper nulla at lectus fermentum aliquam. Nunc elementum commodo
    dui, id pulvinar ex viverra id. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos
    himenaeos.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Interdum et malesuada fames ac ante ipsum primis in faucibus. Sed aliquam vitae lectus sit amet accumsan. Morbi
    nibh urna, condimentum nec volutpat at, lobortis sit amet odio. Etiam quis neque interdum sapien cursus ornare. Cras
    commodo lacinia sapien nec porta. Suspendisse potenti. Nulla hendrerit dolor et rutrum consectetur.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">img</span>  <span class="na">width</span><span class="o">=</span><span class="s">&quot;26&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;20&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/</span>
<span class="s">    rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0C</span>
<span class="s">    cguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7&quot;</span>  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>header0<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>header1<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>header2<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>header3<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>header4<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>header5<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello World!!!<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>Please notice the <tt class="docutils literal">&lt;meta <span class="pre">http-equiv=&quot;Content-Type&quot;</span> <span class="pre">content=&quot;text/html;</span> <span class="pre">charset=utf-8&quot;</span> /&gt;</tt> in the above <span class="caps">HTML</span> &#8212; also it is saved as
Unicode (Encoding - Covert to <span class="caps">UTF</span>-8 in Notepad++). The result (<tt class="docutils literal">testxhtml2pdf.pdf</tt>) should&nbsp;have:</p>
<ul class="simple">
<li>A nice header&nbsp;(h1)</li>
<li>Paragraphs</li>
<li>Horizontal&nbsp;lines</li>
<li>No support for greek characters (same problem as with&nbsp;reportlab)</li>
<li>Images (I am inlining it as a base 64&nbsp;image)</li>
<li>A&nbsp;list</li>
<li>A&nbsp;table</li>
</ul>
<p>Before moving on, I&#8217;d like to fix the problem with the greek characters. You should
set the font to one supporting greek characters, just like you did with ReportLab before.
This can be done with the help of the <tt class="docutils literal"><span class="pre">&#64;font-face</span></tt> <a class="reference external" href="https://github.com/xhtml2pdf/xhtml2pdf/blob/master/doc/usage.rst#fonts">css directive</a>. So, let&#8217;s create
a file named <tt class="docutils literal">testxhtml2pdf2.html</tt> with the following&nbsp;contents:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>

    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
            <span class="nt">font-family</span><span class="o">:</span> <span class="nt">DejaVuSans</span><span class="o">;</span>
            <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s2">&quot;c:/progr/py/django-pdf-guide/django_pdf_guide/DejaVuSans.ttf&quot;</span><span class="o">);</span>
        <span class="p">}</span>

        <span class="nt">body</span> <span class="p">{</span>
            <span class="k">font-family</span><span class="p">:</span> <span class="n">DejaVuSans</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Δοκιμή του xhtml2pdf <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Καλημέρα Ελλάδα!<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>Before running <tt class="docutils literal">xhtml2pdf testxhtml2pdf2.html</tt>, please make
sure to change the url of the font file above to the absolute path of that font in your
local system . As a result, after running xhhtml2pdf
you
should see the unicode characters without&nbsp;problems.</p>
<p>I have to mention here that I wasn&#8217;t able to use the font from a relative path, that&#8217;s
why I used the absolute one. In case something is not right, try
running it with the <tt class="docutils literal"><span class="pre">-d</span></tt> option to output debugging information (something like
<tt class="docutils literal">xhtml2pdf <span class="pre">-d</span> testxhtml2pdf2.html</tt>). You must see a line like this&nbsp;one:</p>
<pre class="code literal-block">
DEBUG [xhtml2pdf] C:\progr\py\django-pdf-guide\venv\lib\site-packages\xhtml2pdf\context.py line 857: Load font 'c:\\progr\\py\\django-pdf-guide\\django_pdf_guide\\DejaVuSans.ttf'
</pre>
<p>to make sure that the font is actually&nbsp;loaded!</p>
</div>
<div class="section" id="pypdf2">
<h3><a class="toc-backref" href="#id8">PyPDF2</a></h3>
<p>The PyPDF2 library can be used to extract pages from a <span class="caps">PDF</span> to a new one
or combine pages from different PDFs to a a new one. A common requirement is
to have the first and page of a report as static PDFs, create the contents
of this report through your app as a <span class="caps">PDF</span> and combine all three PDFs (front page,
content and back page) to the resulting <span class="caps">PDF</span>.</p>
<p>Let&#8217;s see a quick example of combining two&nbsp;PDFs:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyPDF2</span> <span class="kn">import</span> <span class="n">PdfFileMerger</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">pdfs</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">pdfs</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">pdfs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">exit</span><span class="p">(</span><span class="s2">&quot;Please enter at least two pdfs for merging!&quot;</span><span class="p">)</span>

    <span class="n">merger</span> <span class="o">=</span> <span class="n">PdfFileMerger</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">:</span>
        <span class="n">merger</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileobj</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>

    <span class="n">output</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;output.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
    <span class="n">merger</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>
<p>The above will try to open all input parameters (as files) and append them to a the&nbsp;output.pdf.</p>
</div>
</div>
<div class="section" id="django-integration">
<h2><a class="toc-backref" href="#id9">Django&nbsp;integration</a></h2>
<p>To integrate the <span class="caps">PDF</span> creation process with django we&#8217;ll use a simple app with only one model about books. We are
going to use the django-xhtml2pdf library &#8212; I recommend installing the latest version (from github
using something like <tt class="docutils literal">pip install <span class="pre">-e</span> <span class="pre">git+https://github.com/chrisglass/django-xhtml2pdf.git#egg=django-xhtml2pdf</span></tt>
) since the pip package has not been updated in a long&nbsp;time!</p>
<div class="section" id="using-a-plain-old-view">
<h3><a class="toc-backref" href="#id10">Using a plain old&nbsp;view</a></h3>
<p>The simplest case is to just create plain old view to display the <span class="caps">PDF</span>. We&#8217;ll use django-xhtml2pdf along with the
followig django&nbsp;template:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Books<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>ID<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for book in books %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ book.id }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ book.title }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>Name it as <tt class="docutils literal">books_plain_old_view.html</tt> and put it on <tt class="docutils literal">books/templates</tt> directory. The view that
returns the above template as <span class="caps">PDF</span> is the&nbsp;following:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django_xhtml2pdf.utils</span> <span class="kn">import</span> <span class="n">generate_pdf</span>


<span class="k">def</span> <span class="nf">books_plain_old_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;books&#39;</span><span class="p">:</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">generate_pdf</span><span class="p">(</span><span class="s1">&#39;books_plain_old_view.html&#39;</span><span class="p">,</span> <span class="n">file_object</span><span class="o">=</span><span class="n">resp</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
<p>We just use the <tt class="docutils literal">generate_pdf</tt> method of django-xhtml2pdf to help us generate the <span class="caps">PDF</span>, passing it
our response object and a context dictionary (containing all&nbsp;books).</p>
<p>Instead of the simple <span class="caps">HTTP</span> response above, we could add a &#8216;Content Disposition&#8217; <span class="caps">HTTP</span> header to
our response
(or use the django-xhtml2pdf method <tt class="docutils literal">render_to_pdf_response</tt> instead of <tt class="docutils literal">generate_pdf</tt>)
to suggest a default filename for the file to be saved by adding the&nbsp;line</p>
<pre class="code literal-block">
resp['Content-Disposition'] = 'attachment; filename=&quot;output.pdf&quot;'
</pre>
<p>after the definition of <tt class="docutils literal">resp</tt>.</p>
<p>This will have the extra effect, at least in Chrome and Firefox to show the &#8220;Save File&#8221; dialog
when clicking on the link instead of retrieving the <span class="caps">PDF</span> and displaying it inside* the browser&nbsp;window.</p>
</div>
<div class="section" id="using-a-cbv">
<h3><a class="toc-backref" href="#id11">Using a <span class="caps">CBV</span></a></h3>
<p>I don&#8217;t really recommend using plain old Django views - instead I propose to always use Class Based Views
for their DRYness. The best approach is to create a mixin that would allow any kind of <span class="caps">CBV</span> (at least any
kind of <span class="caps">CBV</span> that uses a template) to be rendered in <span class="caps">PDF</span>. Here&#8217;s how we could implement a <tt class="docutils literal">PdfResponseMixin</tt>:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PdfResponseMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="p">):</span>
    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">()</span>
        <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_template_names</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">generate_pdf</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">file_object</span><span class="o">=</span><span class="n">resp</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
<p>Now, we could use this mixin to create <span class="caps">PDF</span> outputting views from any other view! For example, here&#8217;s how
we could create a book list in&nbsp;pdf:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BookPdfListView</span><span class="p">(</span><span class="n">PdfResponseMixin</span><span class="p">,</span> <span class="n">ListView</span><span class="p">):</span>
    <span class="n">context_object_name</span> <span class="o">=</span> <span class="s1">&#39;books&#39;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
</pre></div>
<p>To display it, you could use the same template as <tt class="docutils literal">books_plain_old_view.html</tt> (so either add a <tt class="docutils literal"><span class="pre">template_name='books_plain_old_view.html'</span></tt>
property to the class or copy <tt class="docutils literal">books_plain_old_view.html</tt> to <tt class="docutils literal">books/book_list.html</tt>).</p>
<p>Also, as another example, here&#8217;s a <tt class="docutils literal">BookPdfDetailView</tt> that outputs <span class="caps">PDF</span>:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BookPdfDetailView</span><span class="p">(</span><span class="n">PdfResponseMixin</span><span class="p">,</span> <span class="n">DetailView</span><span class="p">):</span>
    <span class="n">context_object_name</span> <span class="o">=</span> <span class="s1">&#39;book&#39;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
</pre></div>
<p>and a corresponding template (name it <tt class="docutils literal">books/book_detail.html</tt>):</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Book Detail<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>ID<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>: <span class="cp">{{</span> <span class="nv">book.id</span> <span class="cp">}}</span> <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>: <span class="cp">{{</span> <span class="nv">book.title</span> <span class="cp">}}</span> <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>To add the content-disposition header and a name for your <span class="caps">PDF</span>, you can use the following&nbsp;mixin:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PdfResponseMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="p">):</span>
    <span class="n">pdf_name</span> <span class="o">=</span> <span class="s2">&quot;output&quot;</span>

    <span class="k">def</span> <span class="nf">get_pdf_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf_name</span>

    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">()</span>
        <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_template_names</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span>
        <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;attachment; filename=&quot;</span><span class="si">{0}</span><span class="s1">.pdf&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_pdf_name</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">generate_pdf</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">file_object</span><span class="o">=</span><span class="n">resp</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
<p>You see that, in order to havea configurable output name for our <span class="caps">PDF</span> and be consistent with the other
django CBVs, a <tt class="docutils literal">pdf_name</tt> class attribute and a <tt class="docutils literal">get_pdf_name</tt> instance method are added. When
using the above mixin in your classes you can either provide a value for <tt class="docutils literal">pdf_name</tt> (to use the same for all
your instances), or override <tt class="docutils literal">get_pdf_name</tt> to have a dynamic&nbsp;value!</p>
</div>
<div class="section" id="how-does-django-xhtml2pdf-loads-resources">
<h3><a class="toc-backref" href="#id12">How does django-xhtml2pdf loads&nbsp;resources</a></h3>
<p>Before doing more advanced things, we need to understand how <tt class="docutils literal"><span class="pre">django-xhtml2pdf</span></tt> works and specifically
how we can refer to things like css, images, fonts etc from our <span class="caps">PDF</span> templates.
If you check the <a class="reference external" href="https://github.com/chrisglass/django-xhtml2pdf/blob/master/django_xhtml2pdf/utils.py">utils.py of django-xhtml2pdf</a> you&#8217;ll see that it uses a function named <tt class="docutils literal">fetch_resources</tt>
for loading these resources. This function checks to see if the resource starts with <tt class="docutils literal">/MEDIA_URL</tt> or
<tt class="docutils literal">/STATIC_URL</tt> and converts it to a local (filesystem) path. For example, if you refer to a font like
<tt class="docutils literal">/static/font1.ttf</tt> in your <span class="caps">PDF</span> template, <tt class="docutils literal">xhtml2pdf</tt> will try to load the file <tt class="docutils literal">STATIC_ROOT + /font1.ttf</tt>
(and if it does not find the file you want to refer to there it will check all <tt class="docutils literal">STATICFILES_DIRS</tt> entries).</p>
<p>Thus, you can just put your resources into your <tt class="docutils literal">STATIC_ROOT</tt> directory and use the <tt class="docutils literal">{% static %}</tt>
template tag to create <span class="caps">URL</span> paths for them &#8212; django-xhtml2pdf will convert these to local paths and
everything will work&nbsp;fine.</p>
<p><strong>Please notice that you *need* to have configured &#8220;STATIC_ROOT&#8220; for this to work</strong> &#8212; if <tt class="docutils literal">STATIC_ROOT</tt> is
empty (and, for example you use <tt class="docutils literal">static</tt> directories in your apps) then the described substitution
mechanism will <em>not</em> work. Also, notice that the <tt class="docutils literal">/static</tt> directory inside your apps <em>cannot be used</em>
for fetch resources like this
(due to how <tt class="docutils literal">fetch_resources</tt> is implemented it only checks if the static resource is contained inside
the <tt class="docutils literal">STATIC_ROOT</tt> or in one of the the <tt class="docutils literal">STATICFILES_DIRS</tt>) so be careful to either put the static files
you need to load from PDFs (fonts, styles and possibly images) to either the <tt class="docutils literal">STATIC_ROOT</tt> or the
one of the <tt class="docutils literal">STATICFILES_DIRS</tt>.</p>
</div>
<div class="section" id="using-a-common-style-for-your-pdfs">
<h3><a class="toc-backref" href="#id13">Using a common style for your&nbsp;PDFs</a></h3>
<p>If you need to create a lot of similar PDFs then you&#8217;ll probably want to
use a bunch of common styles for them (same fonts, headers etc). This could be done using
the <tt class="docutils literal">{% static %}</tt> trick we saw on the previous section. However, if we include the
styling css as a static file then we won&#8217;t be able to use the static-file-uri-to-local-path
mechanism described above (since the <tt class="docutils literal">{% static %}</tt> template tag won&#8217;t work in static&nbsp;files).</p>
<p>Thankfully, not everything is lost &#8212; Django comes to the rescue!!! We can create a single <span class="caps">CSS</span> file
that would be used by all our <span class="caps">PDF</span> templates and <em>include</em> it in the templates using the <tt class="docutils literal">{% include %}</tt> Django
template tag! Django will think that this will be a normal template and paste its contents where we wanted and
also execute the templates&nbsp;tags!</p>
<p>We&#8217;ll see an example of all this in the next&nbsp;section.</p>
</div>
<div class="section" id="changing-the-font-to-a-unicode-enabled-one">
<h3><a class="toc-backref" href="#id14">Changing the font (to a Unicode enabled&nbsp;one)</a></h3>
<p>The time has finally arrived to change the font! It&#8217;s easy if you know exactly what to do. First of all
configure your <tt class="docutils literal">STATIC_ROOT</tt> and <tt class="docutils literal">STATIC_URL</tt> setting, for example <tt class="docutils literal">STATIC_ROOT = <span class="pre">os.path.join(BASE_DIR,'static')</span></tt>
and <tt class="docutils literal">STATIC_URL = '/static/'</tt>.</p>
<p>Then, add a template-css file for your fonts in one of your templates directories. I am naming the
file <tt class="docutils literal">pdfstylefonts.css</tt> and I&#8217;ve put it to <tt class="docutils literal">books/templates</tt>:</p>
<div class="highlight"><pre><span></span><span class="p">{</span><span class="err">%</span> <span class="err">load</span> <span class="err">static</span> <span class="err">%</span><span class="p">}</span>
<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;Calibri&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="p">{</span><span class="err">%</span> <span class="err">static</span> <span class="err">&quot;fonts/calibri.ttf&quot;</span> <span class="err">%</span><span class="p">}</span><span class="o">);</span>
<span class="p">}</span>
<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;Calibri&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="p">{</span><span class="err">%</span> <span class="err">static</span> <span class="err">&quot;fonts/calibrib.ttf&quot;</span> <span class="err">%</span><span class="p">}</span><span class="o">);</span>
    <span class="nt">font-weight</span><span class="o">:</span> <span class="nt">bold</span><span class="o">;</span>
<span class="p">}</span>
<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;Calibri&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="p">{</span><span class="err">%</span> <span class="err">static</span> <span class="err">&quot;fonts/calibrii.ttf&quot;</span> <span class="err">%</span><span class="p">}</span><span class="o">);</span>
    <span class="nt">font-style</span><span class="o">:</span> <span class="nt">italic</span><span class="o">,</span> <span class="nt">oblique</span><span class="o">;</span>
<span class="p">}</span>
<span class="p">@</span><span class="k">font-face</span> <span class="p">{</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&quot;Calibri&quot;</span><span class="o">;</span>
    <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="p">{</span><span class="err">%</span> <span class="err">static</span> <span class="err">&quot;fonts/calibriz.ttf&quot;</span> <span class="err">%</span><span class="p">}</span><span class="o">);</span>
    <span class="nt">font-weight</span><span class="o">:</span> <span class="nt">bold</span><span class="o">;</span>
    <span class="nt">font-style</span><span class="o">:</span> <span class="nt">italic</span><span class="o">,</span> <span class="nt">oblique</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
<p>I am using Calibri family of fonts (copied from <tt class="docutils literal"><span class="pre">c:\windows\fonts</span></tt>) for this &#8212; I&#8217;ve also configured
all styles (bold, italic, bold-italic) of this font family to use the correct ttf files. All the
ttf files have been copied to the directory <tt class="docutils literal">static/fonts/</tt>.</p>
<p>Now, add another css file that will be your global <span class="caps">PDF</span> styles. This should be put to the <tt class="docutils literal">static</tt> directory
and could be named <tt class="docutils literal">pdfstyle.css</tt>:</p>
<div class="highlight"><pre><span></span><span class="nt">h1</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">*,</span> <span class="nt">html</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;Calibri&quot;</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span><span class="mi">11</span><span class="kt">pt</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>Next, here&#8217;s a template that lists all books (and contain some greek characters &#8212; the title of the books also contain
greek characters) &#8212; I&#8217;ve named it <tt class="docutils literal">book_list_ex.html</tt>:</p>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">load</span> <span class="nv">static</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;pdfstylefonts.css&quot;</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s2">&quot;pdfstyle.css&quot;</span> <span class="cp">%}</span><span class="s">&#39;</span><span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Λίστα βιβλίων<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s2">&quot;pony.png&quot;</span> <span class="cp">%}</span><span class="s">&#39;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>ID<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Cover<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">book</span> <span class="k">in</span> <span class="nv">books</span> <span class="cp">%}</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">book.id</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">book.title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">book.cover.url</span> <span class="cp">}}</span><span class="s">&#39;</span> <span class="p">/&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>You&#8217;ll see that the <tt class="docutils literal">pdfstylefonts.css</tt> is included as a Django template (so that <tt class="docutils literal">{% static %}</tt> will
work in that file) while <tt class="docutils literal">pdfstyle.css</tt> is included using <tt class="docutils literal">{% static %}</tt>.
Als, notice that I&#8217;ve also added a static image (using the <tt class="docutils literal">{% static %}</tt> tag) and a dynamic (media)
file to show off how great the url-to-local-path mechanism works. Please notice that for the
media files to work fine in your development environment you need to configure the
<tt class="docutils literal">MEDIA_URL</tt> and <tt class="docutils literal">MEDIA_ROOT</tt> settigns (similar to <tt class="docutils literal">STATIC_URL</tt> and <tt class="docutils literal">STATIC_ROOT</tt>) and follow the
<a class="reference external" href="https://docs.djangoproject.com/en/1.8/howto/static-files/#serving-files-uploaded-by-a-user-during-development">serve files uploaded by a user during development</a> tutorial on Django&nbsp;docs.</p>
<p>Finally, if you configure a PdfResponseMixin ListView like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BookExPdfListView</span><span class="p">(</span><span class="n">PdfResponseMixin</span><span class="p">,</span> <span class="n">ListView</span><span class="p">):</span>
    <span class="n">context_object_name</span> <span class="o">=</span> <span class="s1">&#39;books&#39;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s1">&#39;books/book_list_ex.html&#39;</span>
</pre></div>
<p>you should see be able to see the correct (calibri) font (defined in <tt class="docutils literal">pdfstylefonts.css</tt>), with unicode characters without problems
including both the static and user uploaded images and with the styles defined in the pdf stylesheet (<tt class="docutils literal">pdfstyle.css</tt>).</p>
</div>
<div class="section" id="configure-django-for-debugging-pdf-creation">
<h3><a class="toc-backref" href="#id15">Configure Django for debugging <span class="caps">PDF</span>&nbsp;creation</a></h3>
<p>If you experience any problems, you can configure xhtml2pdf to output <span class="caps">DEBUG</span> information. To do this,
you may change your django logging configuration like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;disable_existing_loggers&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;console&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.StreamHandler&#39;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s1">&#39;loggers&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;xhtml2pdf&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;console&#39;</span><span class="p">],</span>
            <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>This configuration will keep existing loggers (<tt class="docutils literal">'disable_existing_loggers': False,</tt>) and will configure
<tt class="docutils literal">xhtml2pdf</tt> to log its output to the console, helping us find out why some things won&#8217;t be&nbsp;working.</p>
</div>
<div class="section" id="concatenating-pdfs-in-django">
<h3><a class="toc-backref" href="#id16">Concatenating PDFs in&nbsp;Django</a></h3>
<p>The final section of the <span class="caps">PDF</span>-Django-integration is to explain how we can concatenate PDFs in django using PyPDF2. There may be
some other requirements like extracting pages from PDFs however the most common one as explained before is to just append
the pages of one <span class="caps">PDF</span> after the other &#8212; after all using PyPDF2 is really easy after you get the hang of&nbsp;it.</p>
<p>To be more <span class="caps">DRY</span>, I will create a <tt class="docutils literal">CoverPdfResponseMixin</tt> that will output a <span class="caps">PDF</span> <em>with</em> a cover. To be <em>even more</em> <span class="caps">DRY</span>,
I will refactor <tt class="docutils literal">PdfResponseMixin</tt> to put some common code in an extra method so that <tt class="docutils literal">CoverPdfResponseMixin</tt> could inherit from&nbsp;it:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PdfResponseMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="p">):</span>
    <span class="k">def</span> <span class="nf">write_pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_object</span><span class="p">,</span> <span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">()</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_template_names</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">generate_pdf</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">file_object</span><span class="o">=</span><span class="n">file_object</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span>


<span class="k">class</span> <span class="nc">CoverPdfResponseMixin</span><span class="p">(</span><span class="n">PdfResponseMixin</span><span class="p">,</span> <span class="p">):</span>
    <span class="n">cover_pdf</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="n">merger</span> <span class="o">=</span> <span class="n">PdfFileMerger</span><span class="p">()</span>
        <span class="n">merger</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cover_pdf</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>

        <span class="n">pdf_fo</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="n">pdf_fo</span><span class="p">)</span>
        <span class="n">merger</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pdf_fo</span><span class="p">)</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span>
        <span class="n">merger</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span>
</pre></div>
<p>So, <tt class="docutils literal">PdfResponseMixin</tt> now has a <tt class="docutils literal">write_pdf</tt> method that gets a file-like object and outputs the <span class="caps">PDF</span> there.
The new mixin, <tt class="docutils literal">CoverPdfResponseMixin</tt> has a <tt class="docutils literal">cover_pdf</tt> attribute that should be configured with the filesystem
path of the cover file. The <tt class="docutils literal">render_to_response</tt> method now will create a <tt class="docutils literal">PdfFileMerger</tt> (which is empty
initially) to which it appends the contents <tt class="docutils literal">cover_pdf</tt>. After that, it creates a file-stream (using StreamIO)
and uses <tt class="docutils literal">write_pdf</tt> to create the <span class="caps">PDF</span> there and appends that file-stream to the merger. Finally, it writes
the merger contents to the <tt class="docutils literal">HttpResponse</tt>.</p>
<p>One thing that I&#8217;ve seen is that if you want to concatenate many PDFs with many pages sometimes you&#8217;ll get
a strange an error when using <tt class="docutils literal">PdfFileMerger</tt>. I was able to overcome this by reading and appending the pages of each
<span class="caps">PDF</span> to-be-appended one by one using the <tt class="docutils literal">PdfFileReader</tt> and <tt class="docutils literal">PdfFileWriter</tt> objects. Here&#8217;s a small snippet of how
this could be&nbsp;done:</p>
<div class="highlight"><pre><span></span><span class="n">pdfs</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of pdfs to be concatenated</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">PdfFileWriter</span><span class="p">()</span>

<span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">PdfFileReader</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">getNumPages</span><span class="p">()):</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">addPage</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
<span class="k">return</span> <span class="n">resp</span>
</pre></div>
</div>
</div>
<div class="section" id="more-advanced-xhtml2pdf-features">
<h2><a class="toc-backref" href="#id17">More advanced xhtml2pdf&nbsp;features</a></h2>
<p>In this section I will present some information on how to use various xhtml2pdf features
to create the most common required printed document features, for example adding page
numbers, adding headers and footers&nbsp;etc.</p>
<div class="section" id="laying-out">
<h3><a class="toc-backref" href="#id18">Laying&nbsp;out</a></h3>
<p>To find out how you can create your pages you should read the
<a class="reference external" href="https://github.com/xhtml2pdf/xhtml2pdf/blob/master/doc/usage.rst#defining-page-layouts">defining page layouts</a> section of the xhtml2pdf manual. There
you&#8217;ll see that the basic components of laying out in xhtml2pdf is
&#64;page to create pages and &#64;frames to create rectangular components
inside these pages. So each page will have a number of frames
inside it. These frames are seperated to static and dynamic. Staticsome
should be used for things like headers
and footers (so they&#8217;ll be the same across all pages) and dynamic will
contain the main content of the&nbsp;report.</p>
<p>For pages you can use any page size you want, not just the specified ones. For example, in one of my
projects I wanted to create a <span class="caps">PDF</span> print on a normal plastic card, so I&#8217;d used the
following <tt class="docutils literal">size: 8.56cm 5.398cm;</tt>. Also, page templates can be named
and you can use different ones in the same <span class="caps">PDF</span> (so you could create
a cover page with a different page template, use it first and then continue
with the normal pages). To name a tempalte you just use &#64;page template_name {}
and to change the template use the combination of the following two xhtml2pdf&nbsp;tags:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">pdf:nexttemplate</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;back_page&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">pdf:nextpage</span> <span class="p">/&gt;</span>
</pre></div>
<p>Now, one thing I&#8217;ve noticed is that you are not able to use a named template for the first
page of your <span class="caps">PDF</span>. So, what I&#8217;ve done is that I create an anonymous (default) page for the
first page of the report. If I want to <em>reuse</em> it in another page, I copy it and name it
accordingly. I will give an example&nbsp;shortly.</p>
<p>Now, for frames, I recommend using the <tt class="docutils literal"><span class="pre">-pdf-frame-border:</span> 1;</tt> command for debugging where
they are actually printed. Also, I recommend using a normal ruler and measuring completely
where you want them to be. For example, for the following&nbsp;frame:</p>
<div class="highlight"><pre><span></span><span class="p">@</span><span class="k">frame</span> <span class="nt">photo_frame</span> <span class="p">{</span>
        <span class="nt">-pdf-frame-border</span><span class="o">:</span> <span class="nt">1</span><span class="o">;</span>
        <span class="nt">top</span><span class="o">:</span>  <span class="nt">2</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
        <span class="nt">left</span><span class="o">:</span> <span class="nt">6</span><span class="p">.</span><span class="nc">2cm</span><span class="o">;</span>
        <span class="nt">width</span><span class="o">:</span> <span class="nt">1</span><span class="p">.</span><span class="nc">9cm</span><span class="o">;</span>
        <span class="nt">height</span><span class="o">:</span> <span class="nt">2</span><span class="p">.</span><span class="nc">2cm</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
<p>I&#8217;d used a ruler to find out that I want it to start 2.4 cm from the top of my page (actually a credit card)
and 6.2 cm from the left and have a width and height of 1.9 and 2.2&nbsp;cm.</p>
<p>I recommend naming all frames to be able to distinguish them however I don&#8217;t think that their name plays
any other role. However, for static frames you must define the id of the content they will contain using <tt class="docutils literal"><span class="pre">-pdf-frame-content</span></tt>
in the css and a div with the corresponding id in the <span class="caps">PDF</span> template. For example, you could define a frame header like&nbsp;this</p>
<div class="highlight"><pre><span></span><span class="p">@</span><span class="k">frame</span> <span class="nt">header</span> <span class="p">{</span>
  <span class="nt">-pdf-frame-content</span><span class="o">:</span> <span class="nt">headerContent</span><span class="o">;</span>
  <span class="nt">width</span><span class="o">:</span> <span class="nt">8in</span><span class="o">;</span>
  <span class="nt">top</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">5cm</span><span class="o">;</span>
  <span class="nt">margin-left</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">5cm</span><span class="o">;</span>
  <span class="nt">margin-right</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">5cm</span><span class="o">;</span>
  <span class="nt">height</span><span class="o">:</span> <span class="nt">2cm</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
<p>and its content like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;headerContent&#39;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span> <span class="p">&gt;</span>
    Header !
  <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
<p>Please notice that if for some reason the stuff you want to put in your static frames does not fit there the frame will
be totally empty. This means that if you have size for three lines but you want to output five lines in a static frame
then you&#8217;ll see no&nbsp;lines!</p>
<p>Now, for dynamic content you can expect the opposite behavior:
You <em>cannot</em> select to which dynamic frame your content goes, instead the content just just flows to the first dynamic frame it
fits! If it does not fit in any dynamic frames in the current page then a new page will be&nbsp;created.</p>
<p>I&#8217;d like to present a full example here on the already mentioned project of printing a plastic card for the books. I had two page layouts,
one for the front page having a frame with the owner&#8217;s data and another frame with his photo and one for the back page having
a barcode. This is a Django template that is used to print not only but a <span class="caps">PDF</span> with a group of these&nbsp;cards:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;pdfstylefonts.css&quot;</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&#39;text/css&#39;</span><span class="p">&gt;</span>
    <span class="p">@</span><span class="k">page</span> <span class="p">{</span>
        <span class="nt">size</span><span class="o">:</span> <span class="nt">8</span><span class="p">.</span><span class="nc">56cm</span> <span class="nt">5</span><span class="p">.</span><span class="nc">398cm</span><span class="o">;</span>
        <span class="nt">margin</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span><span class="o">;</span>
        <span class="nt">padding</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span>

        <span class="p">@</span><span class="k">frame</span> <span class="nt">table_frame</span> <span class="p">{</span>
            <span class="c">/* -pdf-frame-border: 1; */</span>
            <span class="nt">top</span><span class="o">:</span>  <span class="nt">2</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
            <span class="nt">left</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
            <span class="nt">width</span><span class="o">:</span> <span class="nt">5</span><span class="p">.</span><span class="nc">5cm</span><span class="o">;</span>
            <span class="nt">height</span><span class="o">:</span> <span class="nt">3cm</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="p">@</span><span class="k">frame</span> <span class="nt">photo_frame</span> <span class="p">{</span>
            <span class="c">/* -pdf-frame-border: 1; */</span>
            <span class="nt">top</span><span class="o">:</span>  <span class="nt">2</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
            <span class="nt">left</span><span class="o">:</span> <span class="nt">6</span><span class="p">.</span><span class="nc">2cm</span><span class="o">;</span>
            <span class="nt">width</span><span class="o">:</span> <span class="nt">1</span><span class="p">.</span><span class="nc">9cm</span><span class="o">;</span>
            <span class="nt">height</span><span class="o">:</span> <span class="nt">2</span><span class="p">.</span><span class="nc">2cm</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="k">page</span> <span class="nt">front_page</span> <span class="p">{</span>
        <span class="nt">size</span><span class="o">:</span> <span class="nt">8</span><span class="p">.</span><span class="nc">56cm</span> <span class="nt">5</span><span class="p">.</span><span class="nc">398cm</span><span class="o">;</span>
        <span class="nt">margin</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span><span class="o">;</span>
        <span class="nt">padding</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span>

        <span class="p">@</span><span class="k">frame</span> <span class="nt">table_frame</span> <span class="p">{</span>
            <span class="c">/* -pdf-frame-border: 1; */</span>
            <span class="nt">top</span><span class="o">:</span>  <span class="nt">2</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
            <span class="nt">left</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
            <span class="nt">width</span><span class="o">:</span> <span class="nt">5</span><span class="p">.</span><span class="nc">5cm</span><span class="o">;</span>
            <span class="nt">height</span><span class="o">:</span> <span class="nt">3cm</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="p">@</span><span class="k">frame</span> <span class="nt">photo_frame</span> <span class="p">{</span>
            <span class="c">/* -pdf-frame-border: 1; */</span>
            <span class="nt">top</span><span class="o">:</span>  <span class="nt">2</span><span class="p">.</span><span class="nc">4cm</span><span class="o">;</span>
            <span class="nt">left</span><span class="o">:</span> <span class="nt">6</span><span class="p">.</span><span class="nc">2cm</span><span class="o">;</span>
            <span class="nt">width</span><span class="o">:</span> <span class="nt">1</span><span class="p">.</span><span class="nc">9cm</span><span class="o">;</span>
            <span class="nt">height</span><span class="o">:</span> <span class="nt">2</span><span class="p">.</span><span class="nc">2cm</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="k">page</span> <span class="nt">back_page</span> <span class="p">{</span>
        <span class="nt">size</span><span class="o">:</span> <span class="nt">8</span><span class="p">.</span><span class="nc">56cm</span> <span class="nt">5</span><span class="p">.</span><span class="nc">398cm</span><span class="o">;</span>
        <span class="nt">margin</span><span class="o">:</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span> <span class="nt">0</span><span class="p">.</span><span class="nc">0cm</span><span class="o">;</span>
        <span class="nt">padding</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span>

        <span class="p">@</span><span class="k">frame</span> <span class="nt">barcode_frame</span> <span class="p">{</span>
            <span class="c">/* -pdf-frame-border: 1; */</span>
            <span class="nt">top</span><span class="o">:</span>  <span class="nt">3</span><span class="p">.</span><span class="nc">9cm</span><span class="o">;</span>
            <span class="nt">left</span><span class="o">:</span> <span class="nt">1</span><span class="p">.</span><span class="nc">8cm</span><span class="o">;</span>
            <span class="nt">width</span><span class="o">:</span> <span class="nt">4</span><span class="p">.</span><span class="nc">9cm</span><span class="o">;</span>
            <span class="nt">height</span><span class="o">:</span> <span class="nt">1</span><span class="p">.</span><span class="nc">1cm</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">*,</span> <span class="nt">html</span> <span class="p">{</span>
        <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;Calibri&quot;</span><span class="p">;</span>
        <span class="k">font-size</span><span class="p">:</span> <span class="mi">8</span><span class="kt">pt</span><span class="p">;</span>
        <span class="k">line-height</span><span class="p">:</span> <span class="mi">80</span><span class="kt">%</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">.</span><span class="nc">bigger</span> <span class="p">{</span>
        <span class="k">font-size</span><span class="p">:</span><span class="mi">9</span><span class="kt">pt</span><span class="p">;</span>
        <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">book</span> <span class="k">in</span> <span class="nv">books</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="cp">&lt;! -- Here I print the card data. It fits exactly in the table_frame so ... -&gt;</span>
            <span class="cp">{{</span> <span class="nv">book.title</span> <span class="cp">}}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 2<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 3<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 4<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 5<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 6<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 7<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 8<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 9<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
            Data line 10<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="cp">&lt;! -- This photo here will be outputted to the photo_frame --&gt;</span>
            <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">book.cover.url</span> <span class="cp">}}</span><span class="s">&#39;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#39;width:1.9cm ; height: 2.2cm ; &#39;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cp">&lt;! -- Now the template is chaned to print the back of the card --&gt;</span>
        <span class="p">&lt;</span><span class="nt">pdf:nexttemplate</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;back_page&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">pdf:nextpage</span> <span class="p">/&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">center</span><span class="p">&gt;</span>
                <span class="cp">&lt;! -- Print the barcode to the barcode_frame --&gt;</span>
                <span class="p">&lt;</span><span class="nt">pdf:barcode</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">book.id</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;code128&quot;</span> <span class="na">humanreadable</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">barwidth</span><span class="o">=</span><span class="s">&quot;0.43mm&quot;</span> <span class="na">barheight</span><span class="o">=</span><span class="s">&quot;0.6cm&quot;</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;middle&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">center</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="c">&lt;!-- Use the front_page template again for the next card --&gt;</span>
        <span class="p">&lt;</span><span class="nt">pdf:nexttemplate</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;front_page&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">pdf:nextpage</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>Notice that I want to print exactly 10 lines in the <tt class="docutils literal">table_frame</tt> (that&#8217;s why I use &lt;br /&gt; to go to next line) &#8212; if I had printed
3-4 lines (for example) then the photo <em>would fit</em> in the <tt class="docutils literal">table_frame</tt> and would be printed there and <em>not</em> in the <tt class="docutils literal">photo_frame</tt>! Also,
another interesting thing is that if I had
outputed 8-9 lines then the photo wouldn&#8217;t fit in that small space and would also be printed to the <tt class="docutils literal">photo_frame</tt>.</p>
</div>
<div class="section" id="extra-stuff">
<h3><a class="toc-backref" href="#id19">Extra&nbsp;stuff</a></h3>
<p>Some extra things I want to mention concerning&nbsp;xhtml2pdf:</p>
<ul class="simple">
<li><tt class="docutils literal">&lt;pdf:pagenumber&gt;</tt> to output the current page number (please end the line after this&nbsp;tag)</li>
<li><tt class="docutils literal">&lt;pdf:pagecount&gt;</tt> to output the total page number (please end the line after this&nbsp;tag)</li>
</ul>
<p>So if you want to print a footer with the pages, I recommend something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;footerContent&#39;</span><span class="p">&gt;</span>
  Page <span class="p">&lt;</span><span class="nt">pdf:pagenumber</span><span class="p">&gt;</span>
  from <span class="p">&lt;</span><span class="nt">pdf:pagecount</span><span class="p">&gt;</span>
  total
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
<p>Notice how the lines end after the&nbsp;tags.</p>
<ul class="simple">
<li><tt class="docutils literal">&lt;pdf:barcode&gt;</tt>: Output a barcode in your <span class="caps">PDF</span>. Here are the possible barcode types: I2of5, Standard39, Extended39, Standard93, Extended93, <span class="caps">MSI</span>, Codabar, Code11, <span class="caps">FIM</span>, <span class="caps">POSTNET</span>, USPS_4State, Code128, <span class="caps">EAN13</span>, <span class="caps">EAN8</span>, <span class="caps">QR</span>.</li>
<li>You may add a page background image using  the <tt class="docutils literal"><span class="pre">background-image</span></tt> property of <tt class="docutils literal">&#64;page</tt>.</li>
</ul>
<p>For example, if you want the templates you create from your development/<span class="caps">UAT</span> systems to be different
than the production ones you could do something like&nbsp;this:</p>
<pre class="code literal-block">
&#64;page {
    {% if DEBUG %}
        background-image: url({% static &quot;debug.png&quot; %});
    {% endif %}
    &lt;!-- Other page properties --&gt;
}
</pre>
</div>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#id20">Conclusion</a></h2>
<p>I hope that using the techniques described in this essential guide you&#8217;ll
be able to create great looking <span class="caps">PDF</span> documents from your Django application
and overcome any difficulties that may arise. If you feel that there&#8217;s something
I&#8217;ve not covered properly (and is not covered by the documentation) please comment
out and I&#8217;ll be happy to research it a bit and update the article with&nbsp;info.</p>
<p>I am using all the above in various production applications for a long time and everything
is smooth so don&#8217;t afraid to create PDFs from&nbsp;Django!</p>
</div>
</div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Serafeim Papastefanos
    </span>
  </span>
<time datetime="2015-11-27T10:20:00+02:00" pubdate>Παρ 27 Νοέμβριος 2015</time>  <span class="categories">
    <a class='category' href='https://spapas.github.io/category/django.html'>django</a>
  </span>
  <span class="categories">
    <a class="category" href="https://spapas.github.io/tag/pdf.html">pdf</a>,    <a class="category" href="https://spapas.github.io/tag/django.html">django</a>,    <a class="category" href="https://spapas.github.io/tag/reportlab.html">reportlab</a>,    <a class="category" href="https://spapas.github.io/tag/python.html">python</a>,    <a class="category" href="https://spapas.github.io/tag/xhtml2pdf.html">xhtml2pdf</a>  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="https://spapas.github.io/2015/11/27/pdf-in-django/" data-via="" data-counturl="https://spapas.github.io/2015/11/27/pdf-in-django/" >Tweet</a>
</div>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <br />
    <a href='/feeds/all.atom.xml'>Atom</a>
    |
    <a href='/feeds/all.rss.xml'>RSS</a>
  </section>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Sidebar unit -->
  <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7673322832689008" data-ad-slot="2720624730"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  <section>
    <h1>Subscribe</h1>
    Do you want to get notified via email when I post new content?
    <style>
      .subscribe-button {
        /* margin: 10px !important; */
        padding: 10px !important;
        background-color: black;
        display: inline-block;
        color: white !important;
        text-decoration: none;

        line-height: 36px !important;
        height: 37px !important;
        text-decoration: none !important;
        display: inline-block !important;
        color: #ffffff !important;
        background-color: #000000 !important;
        border-radius: 3px !important;
        border: 1px solid transparent !important;
        padding: 1px 9px !important;
        font-size: 23px !important;
        letter-spacing: 0.6px !important;
        box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
        -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
        margin: 0 auto !important;
        font-family: 'Cookie', cursive !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
        -o-transition: 0.3s all linear !important;
        -webkit-transition: 0.3s all linear !important;
        -moz-transition: 0.3s all linear !important;
        -ms-transition: 0.3s all linear !important;
        transition: 0.3s all linear !important;

      }
    </style>
    <a class='subscribe-button' target="_blank" href="http://eepurl.com/dxI3PP">Click here to subscribe!</a>
  </section>

  <style>
    .bmc-button img {
      width: 27px !important;
      margin-bottom: 3px !important;
      box-shadow: none !important;
      border: none !important;
      vertical-align: middle !important;
    }

    .bmc-button {
      line-height: 36px !important;
      height: 37px !important;
      text-decoration: none !important;
      display: inline-block !important;
      color: #ffffff !important;
      background-color: #000000 !important;
      border-radius: 3px !important;
      border: 1px solid transparent !important;
      padding: 1px 9px !important;
      font-size: 23px !important;
      letter-spacing: 0.6px !important;
      ;
      box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
      -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
      margin: 0 auto !important;
      font-family: 'Cookie', cursive !important;
      -webkit-box-sizing: border-box !important;
      box-sizing: border-box !important;
      -o-transition: 0.3s all linear !important;
      -webkit-transition: 0.3s all linear !important;
      -moz-transition: 0.3s all linear !important;
      -ms-transition: 0.3s all linear !important;
      transition: 0.3s all linear !important;
    }

    .bmc-button:hover,
    .bmc-button:active,
    .bmc-button:focus {
      -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
      text-decoration: none !important;
      box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
      opacity: 0.85 !important;
      color: #ffffff !important;
    }
  </style>
  <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet">


  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
        <a href="https://spapas.github.io/2020/03/27/wagtail-add-latest-changes/">Adding a latest-changes list to your Wagtail site</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2020/03/18/django-crispy-form-quick-easy-layout/">Quick and easy layout of django forms using django-crispy-forms and django-widget-tweaks</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/10/17/declarative-ecto-query-sorting/">Declarative Ecto query sorting</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/10/03/html-form-submit-php/">How to properly handle an HTML form</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2019/07/25/declarative-ecto-query-filters/">Declarative Ecto query filters</a>
      </li>
    </ul>
  </section>
  <section>

    <h1>Categories</h1>
    <ul id="recent_posts">
      <li><a href="https://spapas.github.io/category/android.html">android</a></li>
      <li><a href="https://spapas.github.io/category/css.html">css</a></li>
      <li><a href="https://spapas.github.io/category/django.html">django</a></li>
      <li><a href="https://spapas.github.io/category/elixir.html">elixir</a></li>
      <li><a href="https://spapas.github.io/category/flask.html">flask</a></li>
      <li><a href="https://spapas.github.io/category/git.html">git</a></li>
      <li><a href="https://spapas.github.io/category/html.html">html</a></li>
      <li><a href="https://spapas.github.io/category/javascript.html">javascript</a></li>
      <li><a href="https://spapas.github.io/category/pelican.html">pelican</a></li>
      <li><a href="https://spapas.github.io/category/postgresql.html">postgresql</a></li>
      <li><a href="https://spapas.github.io/category/python.html">python</a></li>
      <li><a href="https://spapas.github.io/category/spring.html">spring</a></li>
      <li><a href="https://spapas.github.io/category/unix.html">unix</a></li>
      <li><a href="https://spapas.github.io/category/wagtail.html">wagtail</a></li>
    </ul>
  </section>

  <section>
    <h1>Tags</h1>
    <a href="https://spapas.github.io/tag/less.html">less</a>,    <a href="https://spapas.github.io/tag/django-crispy-forms.html">django-crispy-forms</a>,    <a href="https://spapas.github.io/tag/rest.html">rest</a>,    <a href="https://spapas.github.io/tag/query.html">query</a>,    <a href="https://spapas.github.io/tag/ecto.html">ecto</a>,    <a href="https://spapas.github.io/tag/tables.html">tables</a>,    <a href="https://spapas.github.io/tag/pivot_table.html">pivot_table</a>,    <a href="https://spapas.github.io/tag/console.html">console</a>,    <a href="https://spapas.github.io/tag/async.html">async</a>,    <a href="https://spapas.github.io/tag/django-rq.html">django-rq</a>,    <a href="https://spapas.github.io/tag/github-pages.html">github-pages</a>,    <a href="https://spapas.github.io/tag/forms.html">forms</a>,    <a href="https://spapas.github.io/tag/yaml.html">yaml</a>,    <a href="https://spapas.github.io/tag/404.html">404</a>,    <a href="https://spapas.github.io/tag/ldap.html">ldap</a>,    <a href="https://spapas.github.io/tag/immutable.html">immutable</a>,    <a href="https://spapas.github.io/tag/initd.html">init.d</a>,    <a href="https://spapas.github.io/tag/django-widget-tweaks.html">django-widget-tweaks</a>,    <a href="https://spapas.github.io/tag/youtube-dl.html">youtube-dl</a>,    <a href="https://spapas.github.io/tag/python.html">python</a>,    <a href="https://spapas.github.io/tag/django-extensions.html">django-extensions</a>,    <a href="https://spapas.github.io/tag/class-based-views.html">class-based-views</a>,    <a href="https://spapas.github.io/tag/scipy.html">scipy</a>,    <a href="https://spapas.github.io/tag/grid.html">grid</a>,    <a href="https://spapas.github.io/tag/ag-grid.html">ag-grid</a>,    <a href="https://spapas.github.io/tag/du.html">du</a>,    <a href="https://spapas.github.io/tag/watchify.html">watchify</a>,    <a href="https://spapas.github.io/tag/settings.html">settings</a>,    <a href="https://spapas.github.io/tag/flux.html">flux</a>,    <a href="https://spapas.github.io/tag/fixeddatatable.html">FixedDataTable</a>,    <a href="https://spapas.github.io/tag/queries.html">queries</a>,    <a href="https://spapas.github.io/tag/debug.html">debug</a>,    <a href="https://spapas.github.io/tag/imgur.html">imgur</a>,    <a href="https://spapas.github.io/tag/security.html">security</a>,    <a href="https://spapas.github.io/tag/npm.html">npm</a>,    <a href="https://spapas.github.io/tag/hyperapp.html">hyperapp</a>,    <a href="https://spapas.github.io/tag/spring.html">spring</a>,    <a href="https://spapas.github.io/tag/react-redux.html">react-redux</a>,    <a href="https://spapas.github.io/tag/cron.html">cron</a>,    <a href="https://spapas.github.io/tag/babelify.html">babelify</a>,    <a href="https://spapas.github.io/tag/design.html">design</a>,    <a href="https://spapas.github.io/tag/tutorial.html">tutorial</a>,    <a href="https://spapas.github.io/tag/gmail.html">gmail</a>,    <a href="https://spapas.github.io/tag/reportlab.html">reportlab</a>,    <a href="https://spapas.github.io/tag/rq.html">rq</a>,    <a href="https://spapas.github.io/tag/redis.html">redis</a>,    <a href="https://spapas.github.io/tag/python-3.html">python-3</a>,    <a href="https://spapas.github.io/tag/research.html">research</a>,    <a href="https://spapas.github.io/tag/werkzeug.html">werkzeug</a>,    <a href="https://spapas.github.io/tag/jobs.html">jobs</a>,    <a href="https://spapas.github.io/tag/redux-thunk.html">redux-thunk</a>,    <a href="https://spapas.github.io/tag/disk-usage.html">disk-usage</a>,    <a href="https://spapas.github.io/tag/javascript.html">javascript</a>,    <a href="https://spapas.github.io/tag/component.html">component</a>,    <a href="https://spapas.github.io/tag/ajax.html">ajax</a>,    <a href="https://spapas.github.io/tag/elixir.html">elixir</a>,    <a href="https://spapas.github.io/tag/ipython.html">ipython</a>,    <a href="https://spapas.github.io/tag/uglify.html">uglify</a>,    <a href="https://spapas.github.io/tag/configuration.html">configuration</a>,    <a href="https://spapas.github.io/tag/properties.html">properties</a>,    <a href="https://spapas.github.io/tag/bash.html">bash</a>,    <a href="https://spapas.github.io/tag/es6.html">es6</a>,    <a href="https://spapas.github.io/tag/spring-boot.html">spring-boot</a>,    <a href="https://spapas.github.io/tag/postgresql.html">postgresql</a>,    <a href="https://spapas.github.io/tag/kotlin.html">kotlin</a>,    <a href="https://spapas.github.io/tag/adapter.html">adapter</a>,    <a href="https://spapas.github.io/tag/filter.html">filter</a>,    <a href="https://spapas.github.io/tag/flask.html">flask</a>,    <a href="https://spapas.github.io/tag/notebook.html">notebook</a>,    <a href="https://spapas.github.io/tag/static-html.html">static-html</a>,    <a href="https://spapas.github.io/tag/pdf.html">pdf</a>,    <a href="https://spapas.github.io/tag/react-notification.html">react-notification</a>,    <a href="https://spapas.github.io/tag/pelican.html">pelican</a>,    <a href="https://spapas.github.io/tag/tasks.html">tasks</a>,    <a href="https://spapas.github.io/tag/nodejs.html">node.js</a>,    <a href="https://spapas.github.io/tag/unix.html">unix</a>,    <a href="https://spapas.github.io/tag/google.html">google</a>,    <a href="https://spapas.github.io/tag/linux.html">linux</a>,    <a href="https://spapas.github.io/tag/pivot.html">pivot</a>,    <a href="https://spapas.github.io/tag/auditing.html">auditing</a>,    <a href="https://spapas.github.io/tag/git.html">git</a>,    <a href="https://spapas.github.io/tag/java.html">java</a>,    <a href="https://spapas.github.io/tag/introduction.html">introduction</a>,    <a href="https://spapas.github.io/tag/pusher.html">pusher</a>,    <a href="https://spapas.github.io/tag/fixed-data-tables.html">fixed-data-tables</a>,    <a href="https://spapas.github.io/tag/heroku.html">heroku</a>,    <a href="https://spapas.github.io/tag/xhtml2pdf.html">xhtml2pdf</a>,    <a href="https://spapas.github.io/tag/numpy.html">numpy</a>,    <a href="https://spapas.github.io/tag/form.html">form</a>,    <a href="https://spapas.github.io/tag/django-rest-auth.html">django-rest-auth</a>,    <a href="https://spapas.github.io/tag/wagtail.html">wagtail</a>,    <a href="https://spapas.github.io/tag/rst.html">rst</a>,    <a href="https://spapas.github.io/tag/python-2.html">python-2</a>,    <a href="https://spapas.github.io/tag/ffmpeg.html">ffmpeg</a>,    <a href="https://spapas.github.io/tag/middleware.html">middleware</a>,    <a href="https://spapas.github.io/tag/profiles.html">profiles</a>,    <a href="https://spapas.github.io/tag/spring-security.html">spring-security</a>,    <a href="https://spapas.github.io/tag/githubio.html">github.io</a>,    <a href="https://spapas.github.io/tag/error.html">error</a>,    <a href="https://spapas.github.io/tag/asynchronous.html">asynchronous</a>,    <a href="https://spapas.github.io/tag/react-router-redux.html">react-router-redux</a>,    <a href="https://spapas.github.io/tag/select2.html">select2</a>,    <a href="https://spapas.github.io/tag/history.html">history</a>,    <a href="https://spapas.github.io/tag/django-rest-framework.html">django-rest-framework</a>,    <a href="https://spapas.github.io/tag/redux-form.html">redux-form</a>,    <a href="https://spapas.github.io/tag/cbv.html">cbv</a>,    <a href="https://spapas.github.io/tag/scheduling.html">scheduling</a>,    <a href="https://spapas.github.io/tag/plpgsql.html">plpgsql</a>,    <a href="https://spapas.github.io/tag/boilerplate.html">boilerplate</a>,    <a href="https://spapas.github.io/tag/generic.html">generic</a>,    <a href="https://spapas.github.io/tag/babel.html">babel</a>,    <a href="https://spapas.github.io/tag/authentication.html">authentication</a>,    <a href="https://spapas.github.io/tag/html.html">html</a>,    <a href="https://spapas.github.io/tag/android.html">android</a>,    <a href="https://spapas.github.io/tag/pandas.html">pandas</a>,    <a href="https://spapas.github.io/tag/css.html">css</a>,    <a href="https://spapas.github.io/tag/node.html">node</a>,    <a href="https://spapas.github.io/tag/phoenix.html">phoenix</a>,    <a href="https://spapas.github.io/tag/deploy.html">deploy</a>,    <a href="https://spapas.github.io/tag/mongodb.html">mongodb</a>,    <a href="https://spapas.github.io/tag/react.html">react</a>,    <a href="https://spapas.github.io/tag/autocompelte.html">autocompelte</a>,    <a href="https://spapas.github.io/tag/declarative.html">declarative</a>,    <a href="https://spapas.github.io/tag/php.html">php</a>,    <a href="https://spapas.github.io/tag/browserify.html">browserify</a>,    <a href="https://spapas.github.io/tag/branching.html">branching</a>,    <a href="https://spapas.github.io/tag/github.html">github</a>,    <a href="https://spapas.github.io/tag/jupyter.html">jupyter</a>,    <a href="https://spapas.github.io/tag/windows.html">windows</a>,    <a href="https://spapas.github.io/tag/youtube.html">youtube</a>,    <a href="https://spapas.github.io/tag/django.html">django</a>,    <a href="https://spapas.github.io/tag/q.html">q</a>,    <a href="https://spapas.github.io/tag/react-router.html">react-router</a>,    <a href="https://spapas.github.io/tag/redux.html">redux</a>,    <a href="https://spapas.github.io/tag/boostrap-material-design.html">boostrap-material-design</a>  </section>

  <section>
    <h1>Yearly archives</h1>
    <a href="https://spapas.github.io/posts/2013/">2013</a>,    <a href="https://spapas.github.io/posts/2014/">2014</a>,    <a href="https://spapas.github.io/posts/2015/">2015</a>,    <a href="https://spapas.github.io/posts/2016/">2016</a>,    <a href="https://spapas.github.io/posts/2017/">2017</a>,    <a href="https://spapas.github.io/posts/2018/">2018</a>,    <a href="https://spapas.github.io/posts/2019/">2019</a>,    <a href="https://spapas.github.io/posts/2020/">2020</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/spapas">@spapas</a> on GitHub
    <script  src="//code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script type="text/javascript">
      $(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'https://spapas.github.io/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'spapas',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="https://spapas.github.io/theme/js/github.js" type="text/javascript"> </script>
  </section>


  <section>
    <a href="https://twitter.com/_serafeim_?ref_src=twsrc%5Etfw" class="twitter-follow-button"
      data-show-count="false">Follow @_serafeim_</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2013&ndash;2020 Serafeim Papastefanos &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://spapas.github.io/theme/js/modernizr-2.0.js"></script>
  <script src="https://spapas.github.io/theme/js/ender.js"></script>
  <script src="https://spapas.github.io/theme/js/octopress.js" type="text/javascript"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44750952-1', 'auto');

    ga('send', 'pageview');
    </script>
  <script type="text/javascript">
    var disqus_shortname = 'spapas-github-io';
    var disqus_identifier = '/2015/11/27/pdf-in-django/';
    var disqus_url = 'https://spapas.github.io/2015/11/27/pdf-in-django/';
    var disqus_title = 'PDFs in Django: The essential&nbsp;guide';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
</body>

</html>